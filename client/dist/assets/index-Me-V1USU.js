import{R as e,j as a,A as t,a as r,T as n,B as i,C as s,b as o,c as l,I as d,d as h,W as c,e as u,f as x,g as m,E as g,S as p,r as b,D as f,h as y,i as j,u as v,P as w,k,l as S,m as C,n as A,o as I,p as N,L as T,q as z,M as R,F as M,s as W,t as $,v as E,w as F,x as U,y as L,z as P,G as B,H,J as D,K as O,N as _,O as K,Q,U as q,V as Y,X as J,Y as G,Z,_ as V,$ as X,a0 as ee,a1 as ae,a2 as te,a3 as re,a4 as ne,a5 as ie,a6 as se,a7 as oe,a8 as le,a9 as de,aa as he,ab as ce,ac as ue,ad as xe,ae as me,af as ge,ag as pe,ah as be,ai as fe,aj as ye,ak as je,al as ve,am as we,an as ke,ao as Se,ap as Ce,aq as Ae,ar as Ie,as as Ne,at as Te}from"./mui-EbZvywmt.js";import{a as ze,g as Re}from"./vendor-DEQ385Nk.js";import{c as Me,a as We,u as $e,b as Ee,P as Fe}from"./redux-DZXXl2iH.js";import{a as Ue}from"./utils-DVma4InU.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)}).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();var Le,Pe={};const Be=Re(function(){if(Le)return Pe;Le=1;var e=ze();return Pe.createRoot=e.createRoot,Pe.hydrateRoot=e.hydrateRoot,Pe}()),He=e=>{try{localStorage.setItem("favorites",JSON.stringify(e))}catch(a){}},De=Me({name:"favorites",initialState:{items:(()=>{try{const e=localStorage.getItem("favorites");if(e)return JSON.parse(e);const a=Object.keys(localStorage).filter(e=>e.startsWith("favorite-")).map(e=>{try{const a=JSON.parse(localStorage.getItem(e));return localStorage.removeItem(e),a}catch(a){return localStorage.removeItem(e),null}}).filter(e=>null!==e);return a.length>0?(He(a),a):[]}catch(e){return[]}})()},reducers:{addFavorite:(e,a)=>{const t=a.payload;e.items.some(e=>e.id===t.id)||(e.items.push(t),He(e.items))},removeFavorite:(e,a)=>{const t=a.payload;e.items=e.items.filter(e=>e.id!==t),He(e.items)},updateNote:(e,a)=>{const{id:t,note:r}=a.payload,n=e.items.find(e=>e.id===t);n&&(n.note=r,He(e.items))}}}),{addFavorite:Oe,removeFavorite:_e,updateNote:Ke}=De.actions,Qe=De.reducer,qe="1.3.0",Ye=e=>{const a={...Ge};return e&&(e.ayah&&(a.ayah={...a.ayah,...e.ayah}),e.weather&&(a.weather={...a.weather,...e.weather}),e.hadith&&(a.hadith={...a.hadith,...e.hadith}),e.greetings&&(a.greetings={...a.greetings,...e.greetings}),e.tasks&&(a.tasks={...a.tasks,...e.tasks}),e.background&&(a.background={...a.background,...e.background}),e.search&&(a.search={...a.search,...e.search})),a.version=qe,Je(a),a},Je=e=>{try{const a=JSON.parse(JSON.stringify(e)),t=JSON.stringify(a);t.length;localStorage.setItem("settings",t)}catch(a){if("QuotaExceededError"===a.name)try{const a={...e};a.background&&(a.background.uploadedImages=[]);const t=JSON.stringify(JSON.parse(JSON.stringify(a)));localStorage.setItem("settings",t),alert("Storage limit reached. Uploaded images have been cleared to save other settings. Please upload smaller images or fewer images.")}catch(t){alert("Storage limit exceeded. Please clear your browser data or use smaller images.")}}},Ge={version:qe,ayah:{tafsirLanguage:"english",tafsirId:"169",textEdition:{language:"en",identifier:"en.asad"},audioEdition:{identifier:"ar.alafasy",englishName:"Mishary Rashid Alafasy"}},search:{translationEdition:"en.sahih"},weather:{enabled:!0,location:{name:"Toronto",country:"Canada",admin1:"Ontario",latitude:43.65107,longitude:-79.347015},customName:"",timeFormat:"12h",temperatureUnit:"celsius"},hadith:{book:"sahih-bukhari",translationLanguage:"en"},greetings:{enabled:!0,name:"User"},tasks:{enabled:!0},background:{refreshInterval:"newtab",lastRefreshTime:null,currentImageUrl:null,fallbackImageUrl:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1920&q=80",imageSource:"category",islamicCategory:"nature",uploadedImages:[],currentUploadedImageIndex:0,blurIntensity:0,opacity:100}},Ze=Me({name:"settings",initialState:(()=>{try{const e=localStorage.getItem("settings");if(!e)return null;const a=JSON.parse(e);return a.version&&a.version===qe?a:Ye(a)}catch(e){return null}})()||Ge,reducers:{setTafsirLanguage(e,a){e.ayah.tafsirLanguage=a.payload,e.ayah.tafsirId="",Je(e)},setTafsirId(e,a){e.ayah.tafsirId=a.payload,Je(e)},setTextEditionLanguage(e,a){e.ayah.textEdition.language=a.payload,e.ayah.textEdition.identifier="",Je(e)},setTextEditionIdentifier(e,a){e.ayah.textEdition.identifier=a.payload,Je(e)},setAudioEdition(e,a){e.ayah.audioEdition=a.payload,Je(e)},setSearchTranslationEdition(e,a){e.search.translationEdition=a.payload,Je(e)},setWeatherEnabled(e,a){e.weather.enabled=a.payload,Je(e)},setLocation(e,a){e.weather.location=a.payload,Je(e)},setCustomLocationName(e,a){e.weather.customName=a.payload,Je(e)},setTimeFormat(e,a){e.weather.timeFormat=a.payload,Je(e)},setTemperatureUnit(e,a){e.weather.temperatureUnit=a.payload,Je(e)},setHadithBook(e,a){e.hadith.book=a.payload,Je(e)},setHadithTranslationLanguage(e,a){e.hadith.translationLanguage=a.payload,Je(e)},setGreetingsEnabled:(e,a)=>{e.greetings.enabled=a.payload,Je(e)},setName:(e,a)=>{e.greetings.name=a.payload,Je(e)},setTasksEnabled:(e,a)=>{e.tasks.enabled=a.payload,Je(e)},setBackgroundRefreshInterval:(e,a)=>{e.background.refreshInterval=a.payload,Je(e)},setBackgroundLastRefreshTime:(e,a)=>{e.background.lastRefreshTime=a.payload,Je(e)},setBackgroundCurrentImageUrl:(e,a)=>{e.background.currentImageUrl=a.payload,Je(e)},setBackgroundFallbackImageUrl:(e,a)=>{e.background.fallbackImageUrl=a.payload,Je(e)},setBackgroundImageSource:(e,a)=>{e.background.imageSource=a.payload,Je(e)},setBackgroundIslamicCategory:(e,a)=>{e.background.islamicCategory=a.payload,Je(e)},addBackgroundUploadedImage:(e,a)=>{if(e.background.uploadedImages.length<10){const t={id:Date.now(),url:a.payload,name:`Image ${e.background.uploadedImages.length+1}`};e.background.uploadedImages.push(t)}Je(e)},removeBackgroundUploadedImage:(e,a)=>{e.background.uploadedImages=e.background.uploadedImages.filter(e=>e.id!==a.payload),Je(e)},setBackgroundBlurIntensity:(e,a)=>{e.background.blurIntensity=a.payload,Je(e)},setBackgroundOpacity:(e,a)=>{e.background.opacity=a.payload,Je(e)},setBackgroundCurrentUploadedImageIndex:(e,a)=>{e.background.currentUploadedImageIndex=a.payload,Je(e)}}}),{setTafsirLanguage:Ve,setTafsirId:Xe,setTextEditionLanguage:ea,setTextEditionIdentifier:aa,setAudioEdition:ta,setSearchTranslationEdition:ra,setWeatherEnabled:na,setLocation:ia,setCustomLocationName:sa,setTimeFormat:oa,setTemperatureUnit:la,setHadithBook:da,setHadithTranslationLanguage:ha,setGreetingsEnabled:ca,setName:ua,setTasksEnabled:xa,setBackgroundRefreshInterval:ma,setBackgroundLastRefreshTime:ga,setBackgroundCurrentImageUrl:pa,setBackgroundFallbackImageUrl:ba,setBackgroundImageSource:fa,setBackgroundIslamicCategory:ya,addBackgroundUploadedImage:ja,removeBackgroundUploadedImage:va,setBackgroundBlurIntensity:wa,setBackgroundOpacity:ka,setBackgroundCurrentUploadedImageIndex:Sa}=Ze.actions,Ca=We({reducer:{favorites:Qe,settings:Ze.reducer}}),Aa=({error:p,onRetry:b,onDismiss:f,retryCount:y=0,maxRetries:j=3,isRetrying:v=!1,showDetails:w=!1})=>{const[k,S]=e.useState(!1);if(!p)return null;const C=(e=>{const t=((null==e?void 0:e.message)||e||"Unknown error").toLowerCase();return t.includes("network")||t.includes("fetch")?{type:"network",severity:"warning",icon:a.jsx(c,{}),title:"Connection Issue",message:"Unable to connect to the server. Please check your internet connection.",action:"Retry Connection",canRetry:!0}:t.includes("server")||t.includes("500")?{type:"server",severity:"error",icon:a.jsx(u,{}),title:"Server Error",message:"The server is temporarily unavailable. Please try again in a moment.",action:"Try Again",canRetry:!0}:t.includes("ayah")||t.includes("hadith")?{type:"content",severity:"info",icon:a.jsx(x,{}),title:"Content Loading Issue",message:"Unable to load Islamic content. Trying to reconnect...",action:"Reload Content",canRetry:!0}:t.includes("background")||t.includes("image")?{type:"image",severity:"warning",icon:a.jsx(m,{}),title:"Background Image Issue",message:"Unable to load background image. Using fallback image.",action:"Try New Image",canRetry:!0}:t.includes("rate limit")||t.includes("429")?{type:"ratelimit",severity:"warning",icon:a.jsx(m,{}),title:"Rate Limit Reached",message:"Too many requests. Please wait a moment before trying again.",action:"Wait and Retry",canRetry:!0,waitTime:60}:{type:"generic",severity:"error",icon:a.jsx(g,{}),title:"Something Went Wrong",message:"An unexpected error occurred. Please try refreshing the page.",action:"Retry",canRetry:!0}})(p);return C.canRetry,a.jsxs(t,{severity:C.severity,variant:"filled",sx:{backgroundColor:`${C.severity}.main`,backdropFilter:"blur(10px)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.15)",borderRadius:2,minWidth:"300px",maxWidth:"500px",mx:"auto","& .MuiAlert-icon":{fontSize:"1.5rem"}},icon:C.icon,action:f&&a.jsx(d,{size:"small",onClick:f,sx:{color:"white"},children:a.jsx(h,{fontSize:"small"})}),children:[a.jsx(r,{sx:{fontWeight:600},children:C.title}),a.jsx(n,{variant:"body2",sx:{mb:1},children:C.message}),y>0&&a.jsxs(i,{display:"flex",alignItems:"center",gap:1,mb:1,children:[a.jsx(s,{size:"small",label:`Attempt ${y}/${j}`,sx:{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white",fontSize:"0.75rem"}}),y>=j&&a.jsx(n,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)"},children:"Maximum retries reached"})]}),C.waitTime&&a.jsxs(n,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)"},children:["Please wait ",C.waitTime," seconds before retrying"]}),w&&a.jsxs(i,{children:[a.jsxs(o,{size:"small",onClick:()=>S(!k),sx:{color:"rgba(255, 255, 255, 0.8)",p:0,mt:1},children:[k?"Hide":"Show"," Details"]}),a.jsx(l,{in:k,children:a.jsx(i,{sx:{mt:1,p:1,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:1,fontFamily:"monospace",fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.9)",wordBreak:"break-all"},children:"object"==typeof p?JSON.stringify(p,null,2):p})})]})]})},Ia={english:[{id:169,name:"Ibn Kathir (Abridged)",author_name:"Hafiz Ibn Kathir"},{id:168,name:"Ma'arif al-Qur'an",author_name:"Mufti Muhammad Shafi"},{id:817,name:"Tazkirul Quran (Maulana Wahiduddin Khan)",author_name:"Maulana Wahid Uddin Khan"}],bengali:[{id:381,name:"Tafsir Fathul Majid",author_name:"AbdulRahman Bin Hasan Al-Alshaikh"},{id:165,name:"Tafsir Ahsanul Bayaan",author_name:"Bayaan Foundation"},{id:166,name:"Tafsir Abu Bakr Zakaria",author_name:"King Fahd Quran Printing Complex"},{id:164,name:"Tafseer ibn Kathir",author_name:"Tawheed Publication"}],arabic:[{id:16,name:"Tafsir Muyassar",author_name:"المیسر"},{id:93,name:"Al-Tafsir al-Wasit (Tantawi)",author_name:"Waseet"},{id:14,name:"Tafsir Ibn Kathir",author_name:"Hafiz Ibn Kathir"},{id:15,name:"Tafsir al-Tabari",author_name:"Tabari"},{id:90,name:"Al-Qurtubi",author_name:"Qurtubi"},{id:91,name:"السعدي Al-Sa'di",author_name:"Saddi"},{id:94,name:"Tafseer Al-Baghawi",author_name:"Baghawy"}],russian:[{id:170,name:"Al-Sa'di",author_name:"Saddi"}],urdu:[{id:157,name:"Fi Zilal al-Quran",author_name:"Sayyid Ibrahim Qutb"},{id:160,name:"Tafsir Ibn Kathir",author_name:"Hafiz Ibn Kathir"},{id:818,name:"Tazkir ul Quran",author_name:"Maulana Wahid Uddin Khan"},{id:159,name:"Bayan ul Quran",author_name:"Dr. Israr Ahmad"}],kurdish:[{id:804,name:"Rebar Kurdish Tafsir",author_name:"Rebar Kurdish Tafsir"}]},Na=()=>a.jsxs(i,{children:[a.jsxs(i,{mb:2,children:[a.jsx(p,{variant:"text",width:"60%",height:28,sx:{mb:.5}}),a.jsx(p,{variant:"text",width:"40%",height:20})]}),a.jsxs(i,{children:[a.jsx(p,{variant:"text",width:"100%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"95%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"98%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"92%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"100%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"88%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"96%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"90%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"100%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"85%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"93%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"97%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"89%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"100%",height:24,sx:{mb:1}}),a.jsx(p,{variant:"text",width:"75%",height:24})]})]}),Ta=({open:e,onClose:t,surah:r,ayah:s})=>{var o;const l=$e(e=>e.settings.ayah.tafsirId)||169,c=$e(e=>e.settings.ayah.tafsirLanguage)||"english",[u,x]=b.useState(!0),[m,g]=b.useState(null),[p,v]=b.useState(null),w=(null==(o=Ia[c])?void 0:o.find(e=>e.id===l))||{name:"Unknown Tafsir",author_name:""};return b.useEffect(()=>{e&&(x(!0),v(null),fetch(`http://localhost:4000/api/tafsir?tafsirId=${l}&surah=${r}&ayah=${s}`).then(e=>e.json()).then(e=>{if(e.error)throw new Error(e.error);g(e)}).catch(e=>v(e.message)).finally(()=>x(!1)))},[e,r,s,l]),a.jsxs(f,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,PaperProps:{className:"modal-enter"},children:[a.jsxs(y,{children:["Tafsir",a.jsx(d,{onClick:t,sx:{position:"absolute",right:16,top:16},children:a.jsx(h,{})})]}),a.jsxs(j,{dividers:!0,children:[a.jsxs(i,{mb:2,children:[a.jsx(n,{variant:"subtitle1",fontWeight:"bold",children:w.name}),a.jsx(n,{variant:"subtitle2",color:"text.secondary",children:w.author_name})]}),u?a.jsx(Na,{}):p?a.jsx(n,{color:"error",children:p}):m?a.jsx("div",{className:"animate-fade-in",children:a.jsx("div",{dangerouslySetInnerHTML:{__html:m.tafsir},style:{lineHeight:1.6}})}):null]})]})},za=e=>{const a=Math.floor(e/60),t=Math.floor(e%60);return`${a}:${t<10?"0":""}${t}`},Ra=({src:e,onPrev:t,onNext:r,onToggleContinuous:s,isContinuous:o,ayah:l,onFavorite:h})=>{const c=b.useRef(null);v();const[u,x]=b.useState(!1),[m,g]=b.useState(0),[p,f]=b.useState(0),[y,j]=b.useState(!1),E=Ee(),F=$e(e=>e.favorites.items),U=`ayah-${l.surah.number}-${l.surah.ayahNumberInSurah}`,L=F.some(e=>e.id===U);b.useEffect(()=>{const e=c.current;if(!e)return;const a=()=>g(e.duration),t=()=>f(e.currentTime),r=()=>x(!1);return e.addEventListener("loadedmetadata",a),e.addEventListener("timeupdate",t),e.addEventListener("ended",r),()=>{e.removeEventListener("loadedmetadata",a),e.removeEventListener("timeupdate",t),e.removeEventListener("ended",r)}},[]);return a.jsxs(w,{elevation:4,sx:{p:2,width:"100%",maxWidth:1e3,mx:"auto",margin:"2rem auto",backgroundColor:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",boxShadow:"0 8px 16px rgba(0,0,0,0.12)"},children:[a.jsx("audio",{ref:c,src:e,preload:"metadata"}),a.jsxs(i,{display:"flex",justifyContent:"center",alignItems:"center",gap:1,mb:2,children:[a.jsx(k,{title:"Restart",children:a.jsx(d,{onClick:()=>{const e=c.current;e&&(e.currentTime=0,e.play(),x(!0))},children:a.jsx(S,{})})}),a.jsx(k,{title:u?"Pause":"Play",children:a.jsx(d,{onClick:()=>{const e=c.current;e&&(u?e.pause():e.play(),x(!u))},children:u?a.jsx(C,{}):a.jsx(A,{})})}),a.jsx(k,{title:"Stop",children:a.jsx(d,{onClick:()=>{const e=c.current;e&&(e.pause(),e.currentTime=0,x(!1))},children:a.jsx(I,{})})}),a.jsx(k,{title:"Previous Ayah",children:a.jsx(d,{onClick:t,disabled:!o,children:a.jsx(N,{})})}),a.jsx(k,{title:"Toggle Continuous Mode",children:a.jsx(d,{onClick:s,color:o?"primary":"default",children:a.jsx(T,{})})}),a.jsx(k,{title:"Next Ayah",children:a.jsx(d,{onClick:r,children:a.jsx(z,{})})}),a.jsx(k,{title:"View Tafsir",children:a.jsx(d,{onClick:()=>j(!0),children:a.jsx(R,{})})}),a.jsx(k,{title:L?"Unfavorite Ayah":"Favorite Ayah",children:a.jsx(d,{onClick:()=>{if(L)E(_e(U));else{const a={id:U,type:"ayah",surahNumber:l.surah.number,ayahNumber:l.surah.ayahNumberInSurah,text:l.text,audio:e,note:"",surahName:l.surah.englishNameTranslation,surahArabicName:l.surah.name};E(Oe(a))}},children:L?a.jsx(M,{sx:{color:"red"}}):a.jsx(W,{})})})]}),a.jsxs(i,{display:"flex",alignItems:"center",gap:2,children:[a.jsx(n,{variant:"caption",sx:{minWidth:40},children:za(p)}),a.jsx($,{min:0,max:m,value:p,onChange:(e,a)=>{const t=c.current;t&&(t.currentTime=a,f(a))},sx:{flex:1}}),a.jsx(n,{variant:"caption",sx:{minWidth:40},children:za(m)})]}),a.jsx(Ta,{open:y,onClose:()=>j(!1),surah:l.surah.number,ayah:l.surah.ayahNumberInSurah})]})},Ma={1:"Al-Fatihah",2:"Al-Baqarah",3:"Ali 'Imran",4:"An-Nisa",5:"Al-Ma'idah",6:"Al-An'am",7:"Al-A'raf",8:"Al-Anfal",9:"At-Tawbah",10:"Yunus",11:"Hud",12:"Yusuf",13:"Ar-Ra'd",14:"Ibrahim",15:"Al-Hijr",16:"An-Nahl",17:"Al-Isra",18:"Al-Kahf",19:"Maryam",20:"Taha",21:"Al-Anbya",22:"Al-Hajj",23:"Al-Mu'minun",24:"An-Nur",25:"Al-Furqan",26:"Ash-Shu'ara",27:"An-Naml",28:"Al-Qasas",29:"Al-'Ankabut",30:"Ar-Rum",31:"Luqman",32:"As-Sajdah",33:"Al-Ahzab",34:"Saba",35:"Fatir",36:"Ya-Sin",37:"As-Saffat",38:"Sad",39:"Az-Zumar",40:"Ghafir",41:"Fussilat",42:"Ash-Shuraa",43:"Az-Zukhruf",44:"Ad-Dukhan",45:"Al-Jathiyah",46:"Al-Ahqaf",47:"Muhammad",48:"Al-Fath",49:"Al-Hujurat",50:"Qaf",51:"Adh-Dhariyat",52:"At-Tur",53:"An-Najm",54:"Al-Qamar",55:"Ar-Rahman",56:"Al-Waqi'ah",57:"Al-Hadid",58:"Al-Mujadila",59:"Al-Hashr",60:"Al-Mumtahanah",61:"As-Saff",62:"Al-Jumu'ah",63:"Al-Munafiqun",64:"At-Taghabun",65:"At-Talaq",66:"At-Tahrim",67:"Al-Mulk",68:"Al-Qalam",69:"Al-Haqqah",70:"Al-Ma'arij",71:"Nuh",72:"Al-Jinn",73:"Al-Muzzammil",74:"Al-Muddaththir",75:"Al-Qiyamah",76:"Al-Insan",77:"Al-Mursalat",78:"An-Naba",79:"An-Nazi'at",80:"'Abasa",81:"At-Takwir",82:"Al-Infitar",83:"Al-Mutaffifin",84:"Al-Inshiqaq",85:"Al-Buruj",86:"At-Tariq",87:"Al-A'la",88:"Al-Ghashiyah",89:"Al-Fajr",90:"Al-Balad",91:"Ash-Shams",92:"Al-Layl",93:"Ad-Duhaa",94:"Ash-Sharh",95:"At-Tin",96:"Al-'Alaq",97:"Al-Qadr",98:"Al-Bayyinah",99:"Az-Zalzalah",100:"Al-'Adiyat",101:"Al-Qari'ah",102:"At-Takathur",103:"Al-'Asr",104:"Al-Humazah",105:"Al-Fil",106:"Quraysh",107:"Al-Ma'un",108:"Al-Kawthar",109:"Al-Kafirun",110:"An-Nasr",111:"Al-Masad",112:"Al-Ikhlas",113:"Al-Falaq",114:"An-Nas"},Wa=E`
  from { opacity: 0; transform: translateY(10px);}
  to { opacity: 1; transform: translateY(0);}
`,$a=({ayah:e,onPrev:t,onNext:r,onToggleContinuous:o,isContinuous:l,onFavorite:d})=>{const h=v();return a.jsxs(F,{sx:{width:"60%",maxWidth:1e3,mx:"auto",margin:"2rem auto",borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.4)",backdropFilter:"blur(10px)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.15)",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-6px)",boxShadow:"0 20px 40px rgba(0,0,0,0.2)"},animation:`${Wa} 0.6s ease forwards`,overflow:"visible",minHeight:"400px"},children:[a.jsxs(i,{sx:{background:`linear-gradient(90deg, ${h.palette.primary.light} 0%, ${h.palette.primary.main} 100%)`,borderRadius:"8px 8px 0 0",padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",color:"#fff",fontWeight:700,fontSize:"1.3rem"},children:[a.jsxs(i,{children:["Surah ",e.surah.number,": ",e.surah.englishNameTranslation," ",a.jsxs(n,{component:"span",sx:{fontWeight:"normal",fontSize:"1rem",opacity:.8,marginLeft:1},children:["(",e.surah.name," • ",Ma[e.surah.number],")"]}),a.jsxs(n,{variant:"body2",sx:{mt:.5,color:"#eee"},children:["Ayah ",e.surah.ayahNumberInSurah," of ",e.surah.numberOfAyahs]})]}),a.jsx(s,{label:e.surah.revelationType,color:"secondary",size:"small",sx:{fontWeight:700,letterSpacing:"0.06em",textTransform:"uppercase",backgroundColor:h.palette.secondary.main,color:"#fff",fontSize:"0.75rem"}})]}),a.jsxs(U,{sx:{paddingTop:3,paddingBottom:3,position:"relative"},children:[a.jsx(i,{sx:{fontSize:{xs:"1.6rem",sm:"1.9rem"},fontFamily:'"Scheherazade New", serif',direction:"rtl",textAlign:"right",color:"#111827",marginBottom:2,lineHeight:1.6,userSelect:"text",whiteSpace:"pre-line"},textAlign:"center",children:e.arabicText}),a.jsx(L,{sx:{marginBottom:2}}),a.jsx(n,{variant:"body1",sx:{fontSize:{xs:"1rem",sm:"1.15rem"},color:"#374151",fontStyle:"italic",lineHeight:1.4,whiteSpace:"pre-line"},textAlign:"center",children:e.text}),a.jsxs(n,{variant:"caption",color:"text.secondary",sx:{fontWeight:"medium",marginTop:2,display:"block"},textAlign:"center",children:["Translation by ",e.editionName]}),a.jsxs(n,{variant:"body2",sx:{marginTop:1,fontWeight:500,color:e.sajda?"success.main":"text.secondary"},textAlign:"center",children:["Sajdah Tilawah: ",e.sajda?"Yes":"No"]})]}),a.jsx(Ra,{src:e.audio.main,onPrev:t,onNext:r,onToggleContinuous:o,isContinuous:l,ayah:e,onFavorite:d})]})},Ea=E`
  from { opacity: 0; transform: translateY(10px);}
  to { opacity: 1; transform: translateY(0);}
`,Fa=({hadith:e,onPrev:t,onNext:r,onToggleContinuous:o,isContinuous:l,onFavorite:h})=>{const c=v(),u=Ee(),x=$e(e=>e.favorites.items),m=`hadith-${e.bookSlug}-${e.number}`,g=x.some(e=>e.id===m);return a.jsxs(F,{sx:{width:"60%",maxWidth:1e3,mx:"auto",margin:"2rem auto",borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.4)",backdropFilter:"blur(10px)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.15)","&:hover":{transform:"translateY(-6px)",boxShadow:"0 20px 40px rgba(0,0,0,0.2)"},animation:`${Ea} 0.6s ease forwards`,minHeight:"450px"},children:[a.jsxs(i,{sx:{background:`linear-gradient(90deg, ${c.palette.primary.light} 0%, ${c.palette.primary.main} 100%)`,borderRadius:"8px 8px 0 0",padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",color:"#fff",fontWeight:700,fontSize:"1.3rem"},children:[a.jsxs(i,{children:[e.book,a.jsxs(n,{component:"span",sx:{fontWeight:"normal",fontSize:"1rem",opacity:.8,marginLeft:1},children:["- Chapter ",e.chapter.chapterNumber,": ",e.chapter.english]})]}),a.jsx(s,{label:e.status,color:"Sahih"===e.status?"success":"warning",size:"small",sx:{fontWeight:700,letterSpacing:"0.06em",textTransform:"uppercase",backgroundColor:"Sahih"===e.status?c.palette.success.main:c.palette.warning.main,color:"#fff",fontSize:"0.75rem"}})]}),a.jsxs(U,{sx:{paddingTop:3,paddingBottom:3},children:[a.jsx(n,{variant:"subtitle2",textAlign:"center",sx:{fontWeight:500,marginBottom:1},children:e.narrator.english}),a.jsx(i,{sx:{fontSize:{xs:"1.5rem",sm:"1.7rem"},fontFamily:'"Scheherazade New", serif',direction:"rtl",textAlign:"right",color:"#111827",marginBottom:2,lineHeight:1.6,userSelect:"text",whiteSpace:"pre-line"},textAlign:"center",children:e.text.arabic}),a.jsx(L,{sx:{marginBottom:2}}),a.jsx(n,{variant:"body1",textAlign:"center",sx:{fontSize:{xs:"1rem",sm:"1.15rem"},color:"#374151",fontStyle:"italic",whiteSpace:"pre-line",lineHeight:1.5},children:e.text.english}),a.jsxs(n,{variant:"caption",textAlign:"center",display:"block",sx:{mt:2,color:"text.primary"},children:["Hadith #",e.number," from ",e.writer]}),a.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:3},children:[a.jsx(d,{onClick:t,children:a.jsx(N,{})}),a.jsx(k,{title:"Toggle Continuous Mode",children:a.jsx(d,{onClick:o,color:l?"primary":"default",children:a.jsx(T,{})})}),a.jsx(d,{onClick:()=>{if(g)u(_e(m));else{const a={id:m,type:"hadith",book:e.bookSlug,bookDisplayName:e.book,hadithNumber:e.number,englishText:e.text.english||"",note:""};u(Oe(a))}},children:g?a.jsx(M,{sx:{color:"red"}}):a.jsx(W,{})}),a.jsx(d,{onClick:r,children:a.jsx(z,{})})]})]})]})},Ua={morning:[e=>`Assalamu Alaikum, ${e}! May your morning be filled with barakah ☀️`,e=>`Good morning, ${e}! Begin your day with Bismillah 🌅`,e=>`Rise and shine, ${e}! May Allah bless your day 🌞`,e=>`Assalamu Alaikum, ${e}! Today is a gift from Allah 🎁`],afternoon:[e=>`May your afternoon be filled with peace and barakah, ${e} 🌼`,e=>`Hello ${e}, stay grateful and patient this afternoon ☀️`,e=>`${e}, keep going — Allah is with those who persevere 🍃`,e=>`Stay strong, ${e}! Every challenge brings growth 🌱`],evening:[e=>`Good evening, ${e}! Reflect and remember Allah 🌙`,e=>`Good evening, ${e}! May Allah's light guide you through the night 🌠`,e=>`Assalamu Alaikum, ${e}. Wind down with dhikr 🌌`,e=>`Alhamdulillah for today, ${e}! Make it count 💫`],night:[e=>`Good night, ${e}. May Allah grant you restful sleep ⭐`,e=>`Sleep well, ${e}! Don’t forget your evening du'as 🌟`,e=>`${e}, end your day with gratitude and tawakkul 🌙`,e=>`${e}, trust Allah with tomorrow's blessings 💤`]},La=({name:e="Friend"})=>{const[t,r]=b.useState(0),[s,o]=b.useState(!0),l=(()=>{const e=(new Date).getHours();return e>=5&&e<12?"morning":e>=12&&e<17?"afternoon":e>=17&&e<21?"evening":"night"})(),d=Ua[l];b.useEffect(()=>{const e=setInterval(()=>{o(!1),setTimeout(()=>{r(e=>(e+1)%d.length),o(!0)},500)},1e4);return()=>clearInterval(e)},[d.length]);const h=d[t](e),c=(e=>{const a=e.length;let t=1,r="medium";return a>90?(t=.55,r="long"):a>75?(t=.65,r="long"):a>60?(t=.75,r="long"):a>45?(t=.85,r="medium"):a>30?(t=.95,r="medium"):r="short",{fontSize:{xs:1.5*t+"rem",sm:2*t+"rem",md:2.125*t+"rem"},fontWeight:{short:600,medium:500,long:400}[r]}})(h);return a.jsx(i,{textAlign:"center",mt:5,mb:5,sx:{width:"100%",maxWidth:1e3,mx:"auto"},children:a.jsx(P,{in:s,timeout:500,children:a.jsx(n,{variant:"h4",sx:{fontWeight:c.fontWeight,color:"white",fontFamily:"'Poppins', 'Inter', 'Segoe UI', sans-serif",userSelect:"none",lineHeight:1.4,textAlign:"center",fontSize:c.fontSize,letterSpacing:"0.02em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textShadow:"1px 1px 3px rgba(0, 0, 0, 0.5)",minHeight:"3.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:h})})})},Pa="ilmtab_tasks",Ba=()=>{const[e,t]=b.useState([]),[r,s]=b.useState(""),[o,h]=b.useState(!1),[c,u]=b.useState(!1),[x,m]=b.useState(null),[g,p]=b.useState("");b.useEffect(()=>{try{const e=localStorage.getItem(Pa);if(e){const a=JSON.parse(e);t(a)}}catch(e){}},[]),b.useEffect(()=>{try{localStorage.setItem(Pa,JSON.stringify(e))}catch(a){}},[e]),c||e.slice(0,3);const f=e.filter(e=>e.done).length,y=()=>{r.trim()&&(t([...e,{id:Date.now(),text:r.trim(),done:!1}]),s(""))},j=e=>{t(a=>a.map(a=>a.id===e?{...a,done:!a.done}:a))},v=e=>{t(a=>a.filter(a=>a.id!==e))},w=(e,a)=>{m(e),p(a)},S=()=>{g.trim()&&(t(e=>e.map(e=>e.id===x?{...e,text:g.trim()}:e)),m(null),p(""))};return a.jsxs(i,{sx:{display:"relative",justifyContent:"space-between",alignItems:"center",px:2,py:1,width:"60%",maxWidth:1e3,mx:"auto",backgroundColor:"rgba(255, 255, 255, 0.4)",backdropFilter:"blur(10px)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.15)",borderRadius:2,color:"#111827",userSelect:"none",animation:"fadeInUp 0.7s ease forwards"},children:[a.jsxs(i,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",userSelect:"none",py:.5},onClick:()=>h(e=>!e),children:[a.jsxs(n,{variant:"subtitle1",sx:{fontWeight:600,color:"black",fontSize:"1rem"},children:["Your Tasks (",f,"/",e.length,")"]}),o?a.jsx(B,{}):a.jsx(H,{})]}),a.jsx(l,{in:o,timeout:300,children:a.jsxs(i,{sx:{mt:1,bgcolor:"rgba(255,255,255,0.35)",backdropFilter:"blur(8px)",p:2,borderRadius:2,boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1)",color:"#111827"},className:"expand-enter",children:[a.jsxs(i,{sx:{display:"flex",gap:1,mb:1},children:[a.jsx(D,{fullWidth:!0,placeholder:"Add new task",size:"small",value:r,onChange:e=>s(e.target.value),onKeyDown:e=>"Enter"===e.key&&y()}),a.jsx(k,{title:"Add task",children:a.jsx(d,{onClick:y,children:a.jsx(O,{})})})]}),a.jsxs(_,{dense:!0,children:[e.slice(0,3).map(({id:e,text:t,done:r})=>a.jsxs(K,{sx:{px:.5,py:0,display:"flex",alignItems:"center"},className:"list-item-enter",children:[a.jsx(Q,{checked:r,onChange:()=>j(e),sx:{mr:1}}),x===e?a.jsx(D,{fullWidth:!0,value:g,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),S()):"Escape"===e.key&&(m(null),p(""))},onBlur:S,size:"small",autoFocus:!0}):a.jsx(q,{primary:t,sx:{textDecoration:r?"line-through":"none",color:r?"gray":"black"}}),x===e?a.jsx(d,{onClick:S,size:"small",children:a.jsx(Y,{fontSize:"small"})}):a.jsx(d,{onClick:()=>w(e,t),size:"small",children:a.jsx(J,{fontSize:"small"})}),a.jsx(d,{onClick:()=>v(e),size:"small",children:a.jsx(G,{fontSize:"small"})})]},e)),a.jsx(l,{in:c,timeout:300,children:a.jsx(i,{className:"expand-enter",children:e.slice(3).map(({id:e,text:t,done:r})=>a.jsxs(K,{sx:{px:.5,py:0,display:"flex",alignItems:"center"},className:"list-item-enter",children:[a.jsx(Q,{checked:r,onChange:()=>j(e),sx:{mr:1}}),x===e?a.jsx(D,{fullWidth:!0,value:g,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),S()):"Escape"===e.key&&(m(null),p(""))},onBlur:S,size:"small",autoFocus:!0}):a.jsx(q,{primary:t,sx:{textDecoration:r?"line-through":"none",color:r?"gray":"black"}}),x===e?a.jsx(d,{onClick:S,size:"small",children:a.jsx(Y,{fontSize:"small"})}):a.jsx(d,{onClick:()=>w(e,t),size:"small",children:a.jsx(J,{fontSize:"small"})}),a.jsx(d,{onClick:()=>v(e),size:"small",children:a.jsx(G,{fontSize:"small"})})]},e))})})]}),e.length>3&&a.jsx(i,{textAlign:"center",mt:1,children:a.jsxs(d,{onClick:()=>u(e=>!e),size:"small",className:"btn-smooth",sx:{color:"black"},"aria-label":c?"Show less tasks":"Show more tasks",children:[a.jsx(i,{className:"icon-smooth",children:c?a.jsx(B,{}):a.jsx(H,{})}),a.jsx(n,{variant:"caption",sx:{ml:.5},children:c?"Show Less":"Show More"})]})})]})})]})},Ha={0:"sun",1:"sun",2:"cloud",3:"cloud",45:"cloud-rain",48:"cloud-rain",51:"cloud-rain",53:"cloud-rain",55:"cloud-rain",56:"cloud-rain",57:"cloud-rain",61:"cloud-rain",63:"cloud-rain",65:"cloud-rain",66:"cloud-rain",67:"cloud-rain",71:"cloud-snow",73:"cloud-snow",75:"cloud-snow",77:"cloud-snow",80:"cloud-rain",81:"cloud-rain",82:"cloud-rain",85:"cloud-snow",86:"cloud-snow",95:"cloud-lightning",96:"cloud-lightning",99:"cloud-lightning"},Da={0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Heavy drizzle",56:"Light freezing drizzle",57:"Heavy freezing drizzle",61:"Light rain",63:"Moderate rain",65:"Heavy rain",66:"Light freezing rain",67:"Heavy freezing rain",71:"Light snow",73:"Moderate snow",75:"Heavy snow",77:"Snow grains",80:"Light rain showers",81:"Moderate rain showers",82:"Heavy rain showers",85:"Light snow showers",86:"Heavy snow showers",95:"Thunderstorm",96:"Thunderstorm with light hail",99:"Thunderstorm with heavy hail"},Oa=e=>{const t={fontSize:48,animation:"pulse 3s infinite",filter:"drop-shadow(0 0 5px rgba(0,0,0,0.2))"};switch(Ha[e]||"sun"){case"sun":default:return a.jsx(V,{sx:{...t,color:"#fbc02d"}});case"cloud":return a.jsx(te,{sx:{...t,color:"#90a4ae"}});case"cloud-rain":return a.jsx(ae,{sx:{...t,color:"#4fc3f7"}});case"cloud-snow":return a.jsx(ee,{sx:{...t,color:"#81d4fa"}});case"cloud-lightning":return a.jsx(X,{sx:{...t,color:"#f44336"}})}},_a=()=>{const{location:e,customName:t,timeFormat:r,temperatureUnit:s}=$e(e=>e.settings.weather),[o,l]=b.useState(null),[d,h]=b.useState(!0),[c,u]=b.useState(null),[x,m]=b.useState(null),[g,p]=b.useState(!0),[f,y]=b.useState(null),[j,v]=b.useState(new Date),[w,k]=b.useState("UTC");b.useEffect(()=>{(async()=>{var a;const{latitude:t,longitude:r}=e;h(!0),u(null);try{const e=`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${r}&current_weather=true`,n=await Ue.get(e);if(!(null==(a=n.data)?void 0:a.current_weather))throw new Error("Weather data not available");{const e=n.data.current_weather.weathercode;l({tempC:n.data.current_weather.temperature,weatherCode:e,windSpeedKph:n.data.current_weather.windspeed}),u(null)}}catch(n){u("Unable to load weather data"),l(null)}finally{h(!1)}})(),(async()=>{const{latitude:a,longitude:t}=e;p(!0),y(null);try{const e=await fetch(`https://api.aladhan.com/v1/gToH?latitude=${a}&longitude=${t}&method=2`),r=await e.json();if(200!==r.code)throw new Error("Hijri date not available");m(r.data.hijri),y(null)}catch(r){y("Unable to load Islamic date"),m(null)}finally{p(!1)}})()},[e]),b.useEffect(()=>{e.timezone&&k(e.timezone)},[e]),b.useEffect(()=>{const e=setInterval(()=>{v(new Date)},1e3);return()=>clearInterval(e)},[]);const S="12h"===r,C="fahrenheit"===s,A=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",hour12:S,timeZone:w}).format(j),I=j.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric",year:"numeric"});return a.jsxs(a.Fragment,{children:[a.jsx("style",{children:"\n        @keyframes pulse {\n          0%, 100% { transform: scale(1); filter: drop-shadow(0 0 5px rgba(0,0,0,0.2)); }\n          50% { transform: scale(1.1); filter: drop-shadow(0 0 15px rgba(0,0,0,0.35)); }\n        }\n        @keyframes fadeInUp {\n          from { opacity: 0; transform: translateY(12px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n      "}),a.jsxs(i,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",gap:3,px:3,py:3,width:"60%",maxWidth:1e3,mx:"auto",backgroundColor:"rgba(255, 255, 255, 0.4)",backdropFilter:"blur(10px)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.15)",borderRadius:2,color:"#111827",userSelect:"none",animation:"fadeInUp 0.7s ease forwards"},children:[a.jsxs(i,{sx:{flex:1,textAlign:{xs:"center",sm:"left"}},children:[a.jsx(n,{variant:"h3",sx:{fontWeight:600,mb:.5},children:A}),g?a.jsx(Z,{size:24,sx:{color:"#444"}}):f?a.jsx(n,{variant:"body2",sx:{fontWeight:500,color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",padding:"4px 8px",borderRadius:1,fontSize:"0.875rem"},children:f}):x?a.jsxs(n,{variant:"body",sx:{fontWeight:500,color:"#374151"},children:[x.weekday.en,", ",x.day," ",x.month.en," ",x.year," AH"]}):null,a.jsx(n,{variant:"body1",sx:{fontWeight:500,color:"#374151"},children:I})]}),a.jsx(i,{sx:{flexShrink:0,display:"flex",alignItems:"center",gap:2,backgroundColor:"rgba(255, 255, 255, 0.35)",backdropFilter:"blur(8px)",borderRadius:3,p:2,minWidth:180,boxShadow:"0 6px 20px rgba(0, 0, 0, 0.1)",animation:"fadeInUp 1s ease forwards",color:"#111827"},children:d?a.jsx(Z,{size:30,sx:{color:"#444"}}):c?a.jsxs(i,{sx:{textAlign:"center",width:"100%"},children:[a.jsx(n,{variant:"body2",sx:{fontWeight:500,color:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",padding:"8px 12px",borderRadius:1,fontSize:"0.875rem"},children:c}),a.jsx(n,{variant:"subtitle2",sx:{fontWeight:600,mt:1},children:t||e.name})]}):o?a.jsxs(a.Fragment,{children:[Oa(o.weatherCode),a.jsxs(i,{children:[a.jsx(n,{variant:"subtitle1",sx:{fontWeight:600},children:t||e.name}),a.jsx(n,{variant:"h5",sx:{fontWeight:"bold",lineHeight:1},children:(N=o.tempC,C?`${Math.round(1.8*N+32)}°F`:`${Math.round(N)}°C`)}),a.jsx(n,{variant:"body2",sx:{opacity:.7},children:Da[o.weatherCode]||"Unknown"})]})]}):null})]})]});var N},Ka=()=>{const e=v();return a.jsxs(F,{sx:{width:"60%",maxWidth:1e3,mx:"auto",margin:"2rem auto",borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.4)",backdropFilter:"blur(10px)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.15)",overflow:"visible",minHeight:"400px"},children:[a.jsxs(i,{sx:{background:`linear-gradient(90deg, ${e.palette.primary.light} 0%, ${e.palette.primary.main} 100%)`,borderRadius:"8px 8px 0 0",padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs(i,{sx:{flex:1},children:[a.jsx(p,{variant:"text",width:"70%",height:32,sx:{bgcolor:"rgba(255, 255, 255, 0.3)"}}),a.jsx(p,{variant:"text",width:"50%",height:20,sx:{bgcolor:"rgba(255, 255, 255, 0.2)",mt:.5}})]}),a.jsx(p,{variant:"rounded",width:80,height:24,sx:{bgcolor:"rgba(255, 255, 255, 0.3)"}})]}),a.jsxs(U,{sx:{paddingTop:3,paddingBottom:3},children:[a.jsxs(i,{sx:{textAlign:"center",mb:2},children:[a.jsx(p,{variant:"text",width:"90%",height:48,sx:{mx:"auto",mb:1}}),a.jsx(p,{variant:"text",width:"75%",height:48,sx:{mx:"auto",mb:1}}),a.jsx(p,{variant:"text",width:"85%",height:48,sx:{mx:"auto"}})]}),a.jsx(p,{variant:"rectangular",width:"100%",height:1,sx:{mb:2}}),a.jsxs(i,{sx:{textAlign:"center",mb:2},children:[a.jsx(p,{variant:"text",width:"95%",height:24,sx:{mx:"auto",mb:1}}),a.jsx(p,{variant:"text",width:"88%",height:24,sx:{mx:"auto",mb:1}}),a.jsx(p,{variant:"text",width:"92%",height:24,sx:{mx:"auto"}})]}),a.jsxs(i,{sx:{textAlign:"center",mt:2},children:[a.jsx(p,{variant:"text",width:"40%",height:16,sx:{mx:"auto",mb:1}}),a.jsx(p,{variant:"text",width:"30%",height:20,sx:{mx:"auto"}})]})]}),a.jsxs(i,{sx:{backgroundColor:"rgba(248, 250, 252, 0.8)",borderRadius:"0 0 8px 8px",padding:"16px 24px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[a.jsx(p,{variant:"circular",width:40,height:40}),a.jsx(p,{variant:"circular",width:48,height:48}),a.jsx(p,{variant:"circular",width:40,height:40})]}),a.jsx(i,{sx:{flex:1,mx:3},children:a.jsx(p,{variant:"rounded",width:"100%",height:6})}),a.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[a.jsx(p,{variant:"circular",width:40,height:40}),a.jsx(p,{variant:"circular",width:40,height:40})]})]})]})},Qa=()=>{const e=v();return a.jsxs(F,{sx:{width:"60%",maxWidth:1e3,mx:"auto",margin:"2rem auto",borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.4)",backdropFilter:"blur(10px)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.15)",minHeight:"450px"},children:[a.jsxs(i,{sx:{background:`linear-gradient(90deg, ${e.palette.primary.light} 0%, ${e.palette.primary.main} 100%)`,borderRadius:"8px 8px 0 0",padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs(i,{sx:{flex:1},children:[a.jsx(p,{variant:"text",width:"60%",height:32,sx:{bgcolor:"rgba(255, 255, 255, 0.3)"}}),a.jsx(p,{variant:"text",width:"80%",height:20,sx:{bgcolor:"rgba(255, 255, 255, 0.2)",mt:.5}})]}),a.jsx(p,{variant:"rounded",width:70,height:24,sx:{bgcolor:"rgba(255, 255, 255, 0.3)"}})]}),a.jsxs(U,{sx:{paddingTop:3,paddingBottom:3},children:[a.jsx(i,{sx:{textAlign:"center",mb:2},children:a.jsx(p,{variant:"text",width:"50%",height:20,sx:{mx:"auto"}})}),a.jsxs(i,{sx:{textAlign:"center",mb:2},children:[a.jsx(p,{variant:"text",width:"95%",height:44,sx:{mx:"auto",mb:1}}),a.jsx(p,{variant:"text",width:"88%",height:44,sx:{mx:"auto",mb:1}}),a.jsx(p,{variant:"text",width:"92%",height:44,sx:{mx:"auto",mb:1}}),a.jsx(p,{variant:"text",width:"78%",height:44,sx:{mx:"auto"}})]}),a.jsx(p,{variant:"rectangular",width:"100%",height:1,sx:{mb:2}}),a.jsxs(i,{sx:{textAlign:"center",mb:2},children:[a.jsx(p,{variant:"text",width:"98%",height:24,sx:{mx:"auto",mb:1}}),a.jsx(p,{variant:"text",width:"94%",height:24,sx:{mx:"auto",mb:1}}),a.jsx(p,{variant:"text",width:"96%",height:24,sx:{mx:"auto",mb:1}}),a.jsx(p,{variant:"text",width:"85%",height:24,sx:{mx:"auto"}})]}),a.jsx(i,{sx:{textAlign:"center",mt:2},children:a.jsx(p,{variant:"text",width:"45%",height:16,sx:{mx:"auto"}})}),a.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:3},children:[a.jsx(p,{variant:"circular",width:40,height:40}),a.jsx(p,{variant:"circular",width:40,height:40}),a.jsx(p,{variant:"circular",width:40,height:40}),a.jsx(p,{variant:"circular",width:40,height:40})]})]})]})};function qa({children:e,value:t,index:r}){return t===r?a.jsx(i,{sx:{pt:3},children:e}):null}function Ya({open:e,onClose:t,favorites:r,onUpdateNote:s,onDeleteFavorite:o,onNavigateToFavorite:c}){const[u,x]=b.useState(0),[m,g]=b.useState({}),[p,f]=b.useState({}),[y,j]=b.useState({}),v=r.filter(e=>"ayah"===e.type),k=r.filter(e=>"hadith"===e.type),S=(e,a)=>{f(a=>({...a,[e]:!a[e]})),j(t=>({...t,[e]:a}))},C=e=>{const a=y[e];s&&void 0!==a&&(s(e,a),f(a=>({...a,[e]:!1})))},A=e=>{const{id:r,text:s,note:u,type:x,englishText:b}=e,f=m[r],v=p[r],k="hadith"===x?b:s,A=k&&k.length>200;let I="";if("ayah"===x){const a=e.surahName||Ma[e.surahNumber]||"Unknown",t=e.surahArabicName||"";I=`Surah ${e.surahNumber}: ${a} (${t}) - Ayah ${e.ayahNumber}`}else{I=`${e.bookDisplayName||e.book}, Hadith ${e.hadithNumber}`}return a.jsxs(w,{elevation:1,sx:{p:2,mb:2,borderRadius:2,cursor:"pointer",transition:"all 0.3s ease",border:"1px solid transparent","&:hover":{elevation:4,transform:"translateY(-3px)",backgroundColor:"rgba(25, 118, 210, 0.04)",borderColor:"rgba(25, 118, 210, 0.2)",boxShadow:"0 8px 25px rgba(25, 118, 210, 0.15)"}},onClick:()=>(e=>{c&&(c(e),t())})(e),children:[a.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[a.jsx(n,{variant:"subtitle2",fontWeight:"600",children:I}),a.jsx(i,{onClick:e=>e.stopPropagation(),children:a.jsx(d,{onClick:()=>(e=>{o&&o(e)})(r),size:"small",children:a.jsx(G,{fontSize:"small"})})})]}),a.jsxs(i,{children:[a.jsx(n,{sx:{fontStyle:"italic",mt:1,fontSize:"0.9rem",color:"text.secondary"},children:A?(null==k?void 0:k.slice(0,200))+"…":k}),A&&a.jsx(l,{in:f,timeout:300,children:a.jsx(i,{className:"expand-enter",children:a.jsx(n,{sx:{fontStyle:"italic",fontSize:"0.9rem",color:"text.secondary",mt:1},className:"list-item-enter",children:null==k?void 0:k.slice(200)})})}),A&&a.jsx(i,{onClick:e=>e.stopPropagation(),children:a.jsxs(d,{onClick:()=>(e=>g(a=>({...a,[e]:!a[e]})))(r),size:"small",className:"btn-smooth",children:[a.jsx(i,{className:"icon-smooth",children:f?a.jsx(B,{}):a.jsx(H,{})}),a.jsx(n,{variant:"caption",sx:{ml:.5},children:f?"Show Less":"Show More"})]})})]}),a.jsx(i,{sx:{mt:1},children:v?a.jsxs(i,{onClick:e=>e.stopPropagation(),children:[a.jsx(D,{label:"Personal Notes",variant:"outlined",fullWidth:!0,multiline:!0,minRows:2,maxRows:4,value:y[r]||"",onChange:e=>((e,a)=>{j(t=>({...t,[e]:a}))})(r,e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),C(r))},sx:{fontSize:"0.8rem"}}),a.jsxs(i,{display:"flex",justifyContent:"flex-end",gap:1,mt:1,children:[a.jsx(d,{onClick:()=>S(r,u),size:"small",sx:{color:"text.secondary"},children:a.jsx(h,{fontSize:"small"})}),a.jsx(d,{onClick:()=>C(r),size:"small",sx:{color:"text.secondary"},children:a.jsx(Y,{fontSize:"small"})})]})]}):a.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",sx:{bgcolor:u?"rgba(76, 175, 80, 0.04)":"rgba(0,0,0,0.02)",borderRadius:1,p:1,border:u?"1px solid rgba(76, 175, 80, 0.2)":"1px solid rgba(0,0,0,0.04)"},children:[a.jsx(n,{sx:{fontSize:"0.8rem",color:u?"text.primary":"text.secondary",fontStyle:u?"normal":"italic",whiteSpace:"pre-line",flex:1},children:u||"No personal notes added yet."}),a.jsx(d,{onClick:e=>{e.stopPropagation(),S(r,u)},size:"small",children:a.jsx(J,{fontSize:"small"})})]})})]},r)},I=({type:e})=>a.jsxs(i,{textAlign:"center",py:4,sx:{bgcolor:"rgba(0,0,0,0.02)",borderRadius:2,border:"2px dashed rgba(0,0,0,0.1)"},children:[a.jsxs(n,{variant:"h6",sx:{mb:1,color:"text.secondary"},children:["No ","ayah"===e?"Ayahs":"Hadiths"," Saved"]}),a.jsxs(n,{variant:"body2",color:"text.secondary",children:["Start adding ","ayah"===e?"verses":"hadiths"," to your favorites by clicking the heart icon"]})]});return a.jsx(re,{open:e,onClose:t,closeAfterTransition:!0,children:a.jsx(ne,{direction:"right",in:e,mountOnEnter:!0,unmountOnExit:!0,children:a.jsxs(i,{sx:{width:{xs:"100vw",sm:"70vw",md:"50vw",lg:"35vw",xl:"25vw"},maxWidth:"480px",minWidth:"320px",height:"100vh",overflowY:"auto",bgcolor:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",borderRadius:{xs:0,sm:"0 20px 20px 0"},boxShadow:"0 25px 50px rgba(0, 0, 0, 0.15)",position:"fixed",top:0,left:0,border:"1px solid rgba(255, 255, 255, 0.2)"},children:[a.jsxs(i,{sx:{position:"sticky",top:0,zIndex:10,bgcolor:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(0, 0, 0, 0.06)",p:3},children:[a.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[a.jsxs(i,{children:[a.jsx(n,{variant:"h5",sx:{fontWeight:700,color:"text.primary"},children:"❤️ Favorites"}),a.jsx(n,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Your saved verses and hadiths"})]}),a.jsx(d,{onClick:t,sx:{bgcolor:"rgba(0, 0, 0, 0.04)","&:hover":{bgcolor:"rgba(0, 0, 0, 0.08)"}},children:a.jsx(h,{})})]}),a.jsxs(ie,{value:u,onChange:(e,a)=>x(a),sx:{mt:3,"& .MuiTab-root":{minHeight:48,textTransform:"none",fontWeight:600,fontSize:"0.875rem","&.Mui-selected":{color:"primary.main"}},"& .MuiTabs-indicator":{height:3,borderRadius:"3px 3px 0 0"}},children:[a.jsx(se,{label:`Ayahs (${v.length})`}),a.jsx(se,{label:`Hadiths (${k.length})`})]})]}),a.jsxs(i,{sx:{p:3},children:[a.jsx(qa,{value:u,index:0,children:0===v.length?a.jsx(I,{type:"ayah"}):v.map(e=>A(e))}),a.jsx(qa,{value:u,index:1,children:0===k.length?a.jsx(I,{type:"hadith"}):k.map(e=>A(e))})]})]})})})}const Ja={en:[{identifier:"en.asad",englishName:"Muhammad Asad"},{identifier:"en.yusufali",englishName:"Yusuf Ali"},{identifier:"en.pickthall",englishName:"Pickthall"},{identifier:"en.sahih",englishName:"Saheeh International"}],fr:[{identifier:"fr.hamidullah",englishName:"Muhammad Hamidullah"}],es:[{identifier:"es.cortes",englishName:"Julio Cortes"}],ur:[{identifier:"ur.jalandhry",englishName:"Mehmood ul Hassan Jalandhry"},{identifier:"ur.ahmedali",englishName:"Ahmed Ali"}],id:[{identifier:"id.indonesian",englishName:"Bahasa Indonesia"}],hi:[{identifier:"hi.hindi",englishName:"Hindi Translation"}],ta:[{identifier:"ta.tamil",englishName:"Tamil Translation"}],az:[{identifier:"az.mammadaliyev",englishName:"Alikhan Musayev & Mammadaliyev"}]},Ga=[{identifier:"ar.alafasy",englishName:"Mishary Rashid Alafasy"},{identifier:"ar.husary",englishName:"Mahmoud Khalil Al-Husary"},{identifier:"ar.minshawi",englishName:"Muhammad Siddiq al-Minshawi"},{identifier:"ar.shaatree",englishName:"Abu Bakr Al-Shaatree"},{identifier:"ar.abdulsamad",englishName:"Abdul Basit Abdul Samad"},{identifier:"ar.hanif",englishName:"Hanif (Indonesian-style)"},{identifier:"ar.hudhaify",englishName:"Ali Al-Hudhaify"}],Za=[{id:1,name:"Sahih Bukhari",writer:"Imam Bukhari",slug:"sahih-bukhari",hadithsCount:7276,chaptersCount:99},{id:2,name:"Sahih Muslim",writer:"Imam Muslim",slug:"sahih-muslim",hadithsCount:7564,chaptersCount:56},{id:4,name:"Jami' Al-Tirmidhi",writer:"Abu `Isa Muhammad at-Tirmidhi",slug:"al-tirmidhi",hadithsCount:3956,chaptersCount:50},{id:5,name:"Sunan Abu Dawood",writer:"Imam Abu Dawud Sulayman ibn al-Ash'ath as-Sijistani",slug:"abu-dawood",hadithsCount:5274,chaptersCount:43},{id:6,name:"Sunan Ibn-e-Majah",writer:"Imam Muhammad bin Yazid Ibn Majah al-Qazvini",slug:"ibn-e-majah",hadithsCount:4341,chaptersCount:39},{id:7,name:"Sunan An-Nasa'i",writer:"Imam Ahmad an-Nasa'i",slug:"sunan-nasai",hadithsCount:5761,chaptersCount:52},{id:8,name:"Mishkat Al-Masabih",writer:"Imam Khatib at-Tabrizi",slug:"mishkat",hadithsCount:6293,chaptersCount:29}],Va=({countryCode:e,size:t="medium",variant:r="rounded",sx:n={},...s})=>{const o={small:16,medium:20,large:24,xlarge:32},l=o[t]||o.medium,d=e=>({gb:"#012169",us:"#B22234",fr:"#0055A4",es:"#AA151B",pk:"#01411C",sa:"#006C35",bd:"#006A4E",in:"#FF9933",id:"#FF0000",az:"#0092C7",iq:"#CE1126",ru:"#0039A6"}[null==e?void 0:e.toLowerCase()]||"#6B7280"),h=(e=>{if(!e||2!==e.length)return"🏳️";const a=e.toUpperCase().split("").map(e=>127397+e.charCodeAt(0));return String.fromCodePoint(...a)})(e),c="🏳️"!==h;return a.jsx(i,{component:"span",sx:{width:l,height:.75*l,display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:"rounded"===r?1:0,overflow:"hidden",flexShrink:0,border:"1px solid rgba(0,0,0,0.1)",fontSize:.7*l,backgroundColor:c?"transparent":d(e),...n},...s,children:c?h:a.jsx(i,{sx:{width:"100%",height:"100%",backgroundColor:d(e),borderRadius:"inherit"}})})},Xa=({children:e,title:t,icon:r,...s})=>a.jsxs(w,{elevation:2,sx:{p:3,mb:3,borderRadius:3,background:"linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(248,250,252,0.9) 100%)",border:"1px solid rgba(0,0,0,0.06)",transition:"all 0.3s ease","&:hover":{elevation:4,transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(0,0,0,0.1)"}},...s,children:[t&&a.jsxs(i,{display:"flex",alignItems:"center",mb:2,children:[r&&a.jsx(ve,{sx:{bgcolor:"primary.main",width:32,height:32,mr:2,"& .MuiSvgIcon-root":{fontSize:18}},children:r}),a.jsx(n,{variant:"h6",sx:{fontWeight:600,color:"text.primary"},children:t})]}),e]}),et=({children:e,...t})=>a.jsx(we,{fullWidth:!0,sx:{mt:2,"& .MuiOutlinedInput-root":{borderRadius:2,transition:"all 0.3s ease","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderWidth:2}}},"& .MuiInputLabel-root":{fontWeight:500}},...t,children:e}),at=({children:e,...t})=>a.jsx(D,{fullWidth:!0,sx:{mt:2,"& .MuiOutlinedInput-root":{borderRadius:2,transition:"all 0.3s ease","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderWidth:2}}},"& .MuiInputLabel-root":{fontWeight:500}},...t,children:e}),tt=({title:e,description:t,checked:r,onChange:s,icon:o})=>a.jsx(w,{elevation:1,sx:{p:3,mb:2,borderRadius:3,background:r?"linear-gradient(135deg, rgba(25, 118, 210, 0.08) 0%, rgba(25, 118, 210, 0.04) 100%)":"rgba(248, 250, 252, 0.8)",border:r?"2px solid rgba(25, 118, 210, 0.2)":"1px solid rgba(0,0,0,0.06)",transition:"all 0.3s ease",cursor:"pointer","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"}},onClick:()=>s(!r),children:a.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[a.jsxs(i,{display:"flex",alignItems:"center",flex:1,children:[o&&a.jsx(ve,{sx:{bgcolor:r?"primary.main":"grey.400",width:40,height:40,mr:2,transition:"all 0.3s ease"},children:o}),a.jsxs(i,{children:[a.jsx(n,{variant:"subtitle1",sx:{fontWeight:600,mb:.5},children:e}),t&&a.jsx(n,{variant:"body2",color:"text.secondary",children:t})]})]}),a.jsx(ke,{checked:r,onChange:e=>s(e.target.checked),color:"primary",sx:{"& .MuiSwitch-thumb":{boxShadow:"0 2px 8px rgba(0,0,0,0.15)"}}})]})});function rt({open:t,onClose:r}){const s=Ee(),[o,l]=e.useState(0),c=$e(e=>e.settings.ayah.tafsirLanguage),u=$e(e=>e.settings.ayah.tafsirId),x=$e(e=>e.settings.ayah.textEdition.language),m=$e(e=>e.settings.ayah.textEdition.identifier),g=$e(e=>e.settings.ayah.audioEdition.identifier);$e(e=>e.settings.ayah.audioEdition.englishName);const p=$e(e=>e.settings.weather.enabled),[b,f]=e.useState(""),[y,j]=e.useState([]),[v,w]=e.useState(0),k=$e(e=>e.settings.weather.customName),S=$e(e=>e.settings.weather.timeFormat),C=$e(e=>e.settings.weather.temperatureUnit),A=async()=>{var e;if(b.trim())try{const a=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(b)}&count=5`),t=await a.json();j(t.results||[]),w(0),(null==(e=t.results)?void 0:e[0])&&(s(ia(t.results[0])),f(`${t.results[0].name}, ${t.results[0].country}`))}catch(a){}},I=$e(e=>e.settings.hadith),N=$e(e=>e.settings.greetings.enabled),T=$e(e=>e.settings.greetings.name),z=$e(e=>e.settings.tasks.enabled),M=$e(e=>{var a;return(null==(a=e.settings.background)?void 0:a.refreshInterval)||"newtab"}),W=$e(e=>{var a;return(null==(a=e.settings.background)?void 0:a.fallbackImageUrl)||""}),$=$e(e=>{var a;return(null==(a=e.settings.background)?void 0:a.imageSource)||"category"}),E=$e(e=>{var a;return(null==(a=e.settings.background)?void 0:a.islamicCategory)||"nature"}),F=$e(e=>{var a;return(null==(a=e.settings.background)?void 0:a.uploadedImages)||[]});$e(e=>{var a;return(null==(a=e.settings.background)?void 0:a.blurIntensity)||0}),$e(e=>{var a;return(null==(a=e.settings.background)?void 0:a.opacity)||100});const[U,L]=e.useState(""),B=[{label:"Quran",icon:a.jsx(R,{})},{label:"Hadith",icon:a.jsx(ue,{})},{label:"Background",icon:a.jsx(me,{})},{label:"Time & Weather",icon:a.jsx(pe,{})},{label:"Greetings",icon:a.jsx(ye,{})},{label:"Tasks",icon:a.jsx(je,{})}];return a.jsx(re,{open:t,onClose:r,closeAfterTransition:!0,children:a.jsx(ne,{direction:"right",in:t,mountOnEnter:!0,unmountOnExit:!0,children:a.jsxs(i,{sx:{width:{xs:"100vw",sm:"70vw",md:"50vw",lg:"35vw",xl:"25vw"},maxWidth:"480px",minWidth:"320px",height:"100vh",overflowY:"auto",bgcolor:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",borderRadius:{xs:0,sm:"0 20px 20px 0"},boxShadow:"0 25px 50px rgba(0, 0, 0, 0.15)",position:"fixed",top:0,left:0,border:"1px solid rgba(255, 255, 255, 0.2)"},children:[a.jsxs(i,{sx:{position:"sticky",top:0,zIndex:10,bgcolor:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(0, 0, 0, 0.06)",p:3},children:[a.jsx(i,{display:"flex",flexDirection:"column",alignItems:"center",sx:{mb:3},children:a.jsx(i,{component:"img",src:"/IlmTab-logo/vector/default.svg",alt:"IlmTab Logo",sx:{width:200,height:200,mb:2,"&:hover":{transform:"scale(1.05)"}}})}),a.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[a.jsxs(i,{children:[a.jsx(n,{variant:"h5",sx:{fontWeight:700,color:"text.primary"},children:"⚙️ Settings"}),a.jsx(n,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Customize your Islamic experience"})]}),a.jsx(d,{onClick:r,sx:{bgcolor:"rgba(0, 0, 0, 0.04)","&:hover":{bgcolor:"rgba(0, 0, 0, 0.08)"}},children:a.jsx(h,{})})]}),a.jsx(ie,{value:o,onChange:(e,a)=>l(a),sx:{mt:3,"& .MuiTab-root":{minHeight:48,textTransform:"none",fontWeight:600,fontSize:"0.875rem","&.Mui-selected":{color:"primary.main"}},"& .MuiTabs-indicator":{height:3,borderRadius:"3px 3px 0 0"}},variant:"scrollable",scrollButtons:"auto",children:B.map((e,t)=>a.jsx(se,{label:e.label,icon:e.icon,iconPosition:"start"},t))})]}),a.jsx(i,{sx:{p:3},children:a.jsx(P,{in:!0,timeout:300,children:a.jsxs(i,{children:[0===o&&a.jsxs(i,{children:[a.jsxs(Xa,{title:"Text Edition",icon:a.jsx(R,{}),children:[a.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Select your preferred translation and text format for Quranic verses."}),a.jsxs(et,{children:[a.jsx(oe,{children:"Text Language"}),a.jsx(le,{value:x,onChange:e=>{var a;const t=e.target.value;s(ea(t));const r=null==(a=Ja[t])?void 0:a[0];r&&s(aa(r.identifier))},label:"Text Language",children:Object.keys(Ja).map(e=>{const t={en:{flag:"gb",name:"English"},fr:{flag:"fr",name:"French"},es:{flag:"es",name:"Spanish"},ur:{flag:"pk",name:"Urdu"},id:{flag:"id",name:"Indonesian"},hi:{flag:"in",name:"Hindi"},ta:{flag:"in",name:"Tamil"},az:{flag:"az",name:"Azerbaijani"}}[e]||{flag:null,name:e.toUpperCase()};return a.jsx(de,{value:e,children:a.jsxs(i,{display:"flex",alignItems:"center",gap:1,children:[t.flag&&a.jsx(Va,{countryCode:t.flag,size:"small"}),a.jsx(n,{children:t.name})]})},e)})})]}),a.jsxs(et,{children:[a.jsx(oe,{children:"Translation"}),a.jsx(le,{value:m,onChange:e=>{s(aa(e.target.value))},label:"Translation",children:(Ja[x]||[]).map(e=>a.jsx(de,{value:e.identifier,children:e.englishName},e.identifier))})]})]}),a.jsxs(Xa,{title:"Audio Recitation",icon:a.jsx(he,{}),children:[a.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Choose your favorite Qari for beautiful Quranic recitations."}),a.jsxs(et,{children:[a.jsx(oe,{children:"Reciter (Qari)"}),a.jsx(le,{value:g,onChange:e=>{const a=Ga.find(a=>a.identifier===e.target.value);a&&s(ta({identifier:a.identifier,englishName:a.englishName}))},label:"Reciter (Qari)",children:Ga.map(e=>a.jsx(de,{value:e.identifier,children:e.englishName},e.identifier))})]})]}),a.jsxs(Xa,{title:"Tafsir Settings",icon:a.jsx(ce,{}),children:[a.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Choose your preferred language and commentary for deeper understanding of Quranic verses."}),a.jsxs(et,{children:[a.jsx(oe,{children:"Tafsir Language"}),a.jsx(le,{value:c,onChange:e=>{var a;const t=e.target.value;s(Ve(t));const r=null==(a=Ia[t])?void 0:a[0];r&&s(Xe(r.id))},label:"Tafsir Language",children:Object.keys(Ia).map(e=>{const t={english:{flag:"gb",name:"English"},bengali:{flag:"bd",name:"Bengali"},arabic:{flag:"sa",name:"Arabic"},russian:{flag:"ru",name:"Russian"},urdu:{flag:"pk",name:"Urdu"},kurdish:{flag:"iq",name:"Kurdish"}}[e]||{flag:null,name:e.charAt(0).toUpperCase()+e.slice(1)};return a.jsx(de,{value:e,children:a.jsxs(i,{display:"flex",alignItems:"center",gap:1,children:[t.flag&&a.jsx(Va,{countryCode:t.flag,size:"small"}),a.jsx(n,{children:t.name})]})},e)})})]}),a.jsxs(et,{children:[a.jsx(oe,{children:"Tafsir Commentary"}),a.jsx(le,{value:u,onChange:e=>{s(Xe(e.target.value))},label:"Tafsir Commentary",children:(Ia[c]||[]).map(e=>a.jsx(de,{value:e.id,children:e.name},e.id))})]})]})]}),1===o&&a.jsx(i,{children:a.jsxs(Xa,{title:"Hadith Collection",icon:a.jsx(ue,{}),children:[a.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Select your preferred Hadith collection from authentic sources compiled by renowned Islamic scholars."}),a.jsxs(et,{children:[a.jsx(oe,{children:"Hadith Book"}),a.jsx(le,{value:I.book,onChange:e=>{s(da(e.target.value))},label:"Hadith Book",children:Za.map(e=>a.jsx(de,{value:e.slug,children:a.jsxs(i,{children:[a.jsx(n,{variant:"body1",sx:{fontWeight:500},children:e.name}),a.jsxs(n,{variant:"caption",color:"text.secondary",children:[e.hadithsCount.toLocaleString()," Hadiths"]})]})},e.slug))})]}),a.jsxs(et,{children:[a.jsx(oe,{children:"Translation Language"}),a.jsxs(le,{value:I.translationLanguage,onChange:e=>s(ha(e.target.value)),label:"Translation Language",children:[a.jsx(de,{value:"en",children:a.jsxs(i,{display:"flex",alignItems:"center",gap:1,children:[a.jsx(Va,{countryCode:"gb",size:"small"}),a.jsx(n,{children:"English"})]})}),a.jsx(de,{value:"ur",children:a.jsxs(i,{display:"flex",alignItems:"center",gap:1,children:[a.jsx(Va,{countryCode:"pk",size:"small"}),a.jsx(n,{children:"Urdu"})]})})]})]})]})}),2===o&&a.jsxs(i,{children:[a.jsxs(Xa,{title:"Image Source",icon:a.jsx(me,{}),children:[a.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Choose your preferred source for background images. Islamic categories ensure appropriate and respectful content."}),a.jsxs(et,{children:[a.jsx(oe,{children:"Image Source"}),a.jsxs(le,{value:$,onChange:e=>s(fa(e.target.value)),label:"Image Source",children:[a.jsx(de,{value:"category",children:"🕌 Unplash"}),a.jsx(de,{value:"upload",children:"📁 Upload Your Own"})]})]}),"category"===$&&a.jsxs(et,{children:[a.jsx(oe,{children:"Islamic Category"}),a.jsxs(le,{value:E,onChange:e=>s(ya(e.target.value)),label:"Islamic Category",children:[a.jsx(de,{value:"nature",children:"🌿 Nature & Landscapes"}),a.jsx(de,{value:"architecture",children:"🕌 Islamic Architecture"}),a.jsx(de,{value:"calligraphy",children:"✍️ Arabic Calligraphy"}),a.jsx(de,{value:"geometric",children:"🔷 Geometric Patterns"})]})]}),"upload"===$&&a.jsxs(i,{sx:{mt:2},children:[a.jsx("input",{accept:"image/*",style:{display:"none"},id:"image-upload",type:"file",onChange:async e=>{const a=e.target.files[0];if(a&&F.length<10)try{if(a.size>5242880)return alert("Image too large. Please select an image smaller than 5MB."),void(e.target.value="");const t=await((e,a=1920,t=.8)=>new Promise(r=>{const n=document.createElement("canvas"),i=n.getContext("2d"),s=new Image;s.onload=()=>{let{width:e,height:o}=s;e>a&&(o=o*a/e,e=a),n.width=e,n.height=o,i.drawImage(s,0,0,e,o);const l=n.toDataURL("image/jpeg",t);r(l)},s.src=URL.createObjectURL(e)}))(a);if(t.length>1048576)return alert("Image is still too large after compression. Please select a smaller image."),void(e.target.value="");s(ja(t)),s(fa("upload")),e.target.value=""}catch(t){alert("Error processing image. Please try a different image."),e.target.value=""}}}),a.jsx("label",{htmlFor:"image-upload",children:a.jsxs(i,{sx:{width:"100%",height:80,border:"2px dashed",borderColor:"primary.main",borderRadius:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease","&:hover":{bgcolor:"rgba(25, 118, 210, 0.04)",borderColor:"primary.dark"}},children:[a.jsx(xe,{sx:{fontSize:32,mb:1,color:"primary.main"}}),a.jsx(n,{variant:"body2",color:"primary.main",sx:{fontWeight:500},children:"Click to Upload Image"}),a.jsxs(n,{variant:"caption",color:"text.secondary",children:[F.length,"/10 images uploaded"]})]})}),F.length>0&&a.jsxs(i,{sx:{mt:2},children:[a.jsxs(n,{variant:"body2",sx:{mb:2,fontWeight:500},children:["📁 Uploaded Images (",F.length,"/10)"]}),a.jsx(i,{display:"flex",flexWrap:"wrap",gap:1,children:F.map(e=>a.jsxs(i,{sx:{position:"relative",width:60,height:60,borderRadius:2,overflow:"hidden",border:"2px solid",borderColor:"primary.main"},children:[a.jsx("img",{src:e.url,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"}}),a.jsx(d,{size:"small",onClick:()=>s(va(e.id)),sx:{position:"absolute",top:-6,right:-6,bgcolor:"error.main",color:"white",width:24,height:24,boxShadow:"0 2px 8px rgba(0,0,0,0.3)",border:"1px solid white","&:hover":{bgcolor:"error.dark",transform:"scale(1.1)",boxShadow:"0 4px 12px rgba(0,0,0,0.4)"},transition:"all 0.2s ease"},children:a.jsx(h,{sx:{fontSize:14,fontWeight:"bold"}})})]},e.id))}),F.length>=10&&a.jsx(n,{variant:"caption",color:"warning.main",sx:{mt:1,display:"block"},children:"⚠️ Maximum of 10 images reached"})]})]}),a.jsx(i,{sx:{mt:2,p:2,bgcolor:"rgba(76, 175, 80, 0.04)",borderRadius:2},children:a.jsx(n,{variant:"body2",color:"success.main",sx:{fontWeight:500},children:"🛡️ Islamic categories ensure only appropriate, respectful images are displayed, maintaining the spiritual atmosphere of your experience."})})]}),a.jsxs(Xa,{title:"Refresh Settings",icon:a.jsx(ge,{}),children:[a.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Configure how often the background image refreshes."}),a.jsxs(et,{children:[a.jsx(oe,{children:"Refresh Interval"}),a.jsxs(le,{value:M,onChange:e=>s(ma(e.target.value)),label:"Refresh Interval",children:[a.jsx(de,{value:"newtab",children:"🔄 Every New Tab"}),a.jsx(de,{value:"5min",children:"⏱️ Every 5 Minutes"}),a.jsx(de,{value:"15min",children:"⏱️ Every 15 Minutes"}),a.jsx(de,{value:"30min",children:"⏱️ Every 30 Minutes"}),a.jsx(de,{value:"1hour",children:"⏰ Every Hour"}),a.jsx(de,{value:"1day",children:"📅 Every Day"}),a.jsx(de,{value:"1week",children:"📅 Every Week"})]})]})]}),a.jsxs(Xa,{title:"Fallback Image",icon:a.jsx(xe,{}),children:[a.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Set a backup image URL for when other sources are unavailable."}),a.jsx(at,{label:"Fallback Image URL",value:W,onChange:e=>s(ba(e.target.value)),onKeyPress:e=>{"Enter"===e.key&&e.target.blur()},placeholder:"https://example.com/beautiful-image.jpg",helperText:"This image will be displayed when other sources fail"})]})]}),3===o&&a.jsxs(i,{children:[a.jsx(tt,{title:"Weather & Time Display",description:"Show current weather conditions and time information",checked:p,onChange:e=>s(na(e)),icon:a.jsx(pe,{})}),p&&a.jsxs(a.Fragment,{children:[a.jsxs(Xa,{title:"Location Settings",icon:a.jsx(be,{}),children:[a.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Set your location to get accurate weather information and local time."}),a.jsxs(i,{display:"flex",gap:2,alignItems:"flex-end",children:[a.jsx(at,{label:"Search City",value:b,onChange:e=>f(e.target.value),onKeyPress:e=>{"Enter"===e.key&&A()},placeholder:"Enter city name...",sx:{flex:1}}),a.jsx(d,{onClick:A,sx:{mb:.25,bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"}},children:a.jsx(be,{})})]}),y.length>0&&a.jsxs(et,{children:[a.jsx(oe,{children:"Select Location"}),a.jsx(le,{value:v,onChange:e=>{const a=e.target.value;w(a);const t=y[a];t&&(s(ia(t)),f(`${t.name}, ${t.country}`))},label:"Select Location",children:y.map((e,t)=>a.jsx(de,{value:t,children:a.jsxs(i,{children:[a.jsx(n,{variant:"body1",sx:{fontWeight:500},children:e.name}),a.jsxs(n,{variant:"caption",color:"text.secondary",children:[e.admin1&&`${e.admin1}, `,e.country,e.population&&` • ${e.population.toLocaleString()} people`]})]})},t))})]}),a.jsx(at,{label:"Custom Display Name",value:k,onChange:e=>s(sa(e.target.value)),onKeyPress:e=>{"Enter"===e.key&&e.target.blur()},placeholder:"Optional custom name for your location",helperText:"Leave empty to use the default city name"})]}),a.jsxs(Xa,{title:"Display Preferences",icon:a.jsx(fe,{}),children:[a.jsxs(et,{children:[a.jsx(oe,{children:"Time Format"}),a.jsxs(le,{value:S,onChange:e=>s(oa(e.target.value)),label:"Time Format",children:[a.jsx(de,{value:"12h",children:"🕐 12-hour (AM/PM)"}),a.jsx(de,{value:"24h",children:"🕐 24-hour"})]})]}),a.jsxs(et,{children:[a.jsx(oe,{children:"Temperature Unit"}),a.jsxs(le,{value:C,onChange:e=>s(la(e.target.value)),label:"Temperature Unit",children:[a.jsx(de,{value:"celsius",children:"🌡️ Celsius (°C)"}),a.jsx(de,{value:"fahrenheit",children:"🌡️ Fahrenheit (°F)"})]})]})]})]})]}),4===o&&a.jsxs(i,{children:[a.jsx(tt,{title:"Personal Greetings",description:"Display personalized Islamic greetings with your name",checked:N,onChange:e=>s(ca(e)),icon:a.jsx(ye,{})}),N&&a.jsxs(Xa,{title:"Greeting Settings",icon:a.jsx(ye,{}),children:[a.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Personalize your experience with Islamic greetings that change based on the time of day."}),a.jsx(at,{label:"Your Name",value:T,onChange:e=>{const a=e.target.value.trimStart();a.length>30?L("Name must be under 30 characters."):a.trim().length>0&&a.trim().length<2?L("Name must be at least 2 characters."):L(""),s(ua(a))},onKeyPress:e=>{"Enter"===e.key&&e.target.blur()},placeholder:"Enter your name",error:!!U,helperText:U||"This will be used in your personalized greetings"}),a.jsx(i,{sx:{mt:3,p:2,bgcolor:"rgba(76, 175, 80, 0.04)",borderRadius:2},children:a.jsxs(n,{variant:"body2",color:"success.main",sx:{fontWeight:500},children:['🌅 Preview: "Assalamu Alaikum,'," ",T||"Ahmad",'! May your morning be blessed."']})})]})]}),5===o&&a.jsxs(i,{children:[a.jsx(tt,{title:"Task Management",description:"Enable the todo list to organize your daily tasks and goals",checked:z,onChange:e=>s(xa(e)),icon:a.jsx(je,{})}),z&&a.jsxs(Xa,{title:"Task Features",icon:a.jsx(je,{}),children:[a.jsx(n,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"The task management system helps you organize your daily activities and spiritual goals."}),a.jsx(i,{sx:{mt:2,p:2,bgcolor:"rgba(76, 175, 80, 0.04)",borderRadius:2},children:a.jsx(n,{variant:"body2",color:"success.main",sx:{fontWeight:500},children:"✅ Features: Add tasks, mark as complete, organize by priority, and track your daily progress."})})]})]})]})})})]})})})}const nt=()=>a.jsxs(i,{sx:{maxHeight:"50vh",overflow:"auto"},children:[a.jsx(L,{}),a.jsx(_,{sx:{p:0},children:[...Array(5)].map((e,t)=>a.jsx(K,{sx:{borderBottom:t<4?"1px solid rgba(0,0,0,0.06)":"none",py:2},children:a.jsx(q,{primary:a.jsxs(i,{children:[a.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[a.jsx(p,{variant:"text",width:"75%",height:20,sx:{flex:1}}),a.jsx(p,{variant:"circular",width:24,height:24,sx:{ml:1}})]}),a.jsx(p,{variant:"text",width:"100%",height:16,sx:{mb:.5}}),a.jsx(p,{variant:"text",width:"95%",height:16,sx:{mb:.5}}),a.jsx(p,{variant:"text",width:"80%",height:16})]})})},t))})]}),it=({onSelectAyah:e,onClose:r})=>{const[s,o]=b.useState(""),[c,u]=b.useState([]),[x,m]=b.useState(!1),[g,p]=b.useState(null),[f,y]=b.useState(!0),[j,v]=b.useState(0),[w,k]=b.useState(!1),S=Ee(),C=$e(e=>e.settings.search.translationEdition),A=$e(e=>e.favorites.items),I=C,N=async()=>{if(s.trim()){m(!0),p(null),k(!0);try{const e=await Ue.get(`https://api.alquran.cloud/v1/search/${encodeURIComponent(s)}/all/${I}`);if(e.data&&e.data.data&&e.data.data.matches){const a=e.data.data.matches.map(e=>({surahNumber:e.surah.number,ayahNumber:e.numberInSurah,verseKey:`${e.surah.number}:${e.numberInSurah}`,arabicText:e.text,translation:e.text,highlighted:T(e.text,s),surahName:e.surah.englishName,surahArabicName:e.surah.name}));u(a),v(e.data.data.count||a.length)}else u([]),v(0)}catch(e){e.response&&404===e.response.status?(u([]),v(0),p(null)):(p("Failed to search. Please try again."),u([]),v(0))}finally{m(!1)}}},T=(e,a)=>{if(!e||!a)return e;const t=new RegExp(`(${a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return e.replace(t,'<mark style="background-color: #ffeb3b; padding: 1px 2px; border-radius: 2px;">$1</mark>')},z=(e,a)=>{const t=`ayah-${e}-${a}`;return A.some(e=>e.id===t)};return a.jsx(re,{open:!0,onClose:r,closeAfterTransition:!0,children:a.jsxs(i,{className:"modal-enter",sx:{position:"fixed",top:20,right:20,width:{xs:"90vw",sm:"400px",md:"450px"},maxHeight:"80vh",overflowY:"auto",bgcolor:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",borderRadius:3,boxShadow:"0 25px 50px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[a.jsxs(i,{sx:{p:2,backgroundColor:"primary.main",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs(i,{display:"flex",alignItems:"center",gap:1,children:[a.jsx(R,{}),a.jsx(n,{variant:"h6",sx:{fontWeight:600},children:"Search Quran"})]}),a.jsxs(i,{display:"flex",alignItems:"center",gap:1,children:[a.jsx(d,{size:"small",onClick:()=>y(!f),sx:{color:"white"},children:f?a.jsx(B,{}):a.jsx(H,{})}),a.jsx(d,{size:"small",onClick:r,sx:{color:"white"},children:a.jsx(h,{})})]})]}),a.jsxs(l,{in:f,children:[a.jsxs(i,{sx:{p:2},children:[a.jsx(D,{fullWidth:!0,placeholder:"Search for keywords in the Quran...",value:s,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"===e.key&&N()},InputProps:{endAdornment:a.jsx(Se,{position:"end",children:a.jsx(d,{onClick:N,disabled:x,children:x?a.jsx(Z,{size:20}):a.jsx(Ce,{})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2},mb:2}}),a.jsxs(we,{fullWidth:!0,size:"small",sx:{mb:2},children:[a.jsx(oe,{children:"Translation"}),a.jsx(le,{value:I,label:"Translation",onChange:e=>S(ra(e.target.value)),sx:{borderRadius:2},MenuProps:{PaperProps:{sx:{zIndex:3e3}}},children:[{identifier:"en.asad",name:"Muhammad Asad"},{identifier:"en.yusufali",name:"Yusuf Ali"},{identifier:"en.pickthall",name:"Pickthall"},{identifier:"en.sahih",name:"Saheeh International"}].map(e=>a.jsx(de,{value:e.identifier,children:e.name},e.identifier))})]}),s&&!x&&w&&a.jsx(i,{sx:{display:"flex",alignItems:"center",gap:1},children:a.jsx(n,{variant:"caption",color:"text.secondary",children:j>0?`${j} result${1!==j?"s":""} found`:"No results found"})})]}),g&&a.jsx(i,{sx:{px:2,pb:2},children:a.jsx(t,{severity:"error",sx:{borderRadius:2},children:g})}),x&&w?a.jsx(nt,{}):c.length>0?a.jsxs(i,{sx:{maxHeight:"50vh",overflow:"auto"},children:[a.jsx(L,{}),a.jsx(_,{sx:{p:0},children:c.map((t,s)=>a.jsx(K,{button:!0,className:"stagger-item smooth-hover",onClick:()=>(a=>{e(a.surahNumber,a.ayahNumber),r()})(t),sx:{borderBottom:s<c.length-1?"1px solid rgba(0,0,0,0.06)":"none","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.04)"}},children:a.jsx(q,{primary:a.jsxs(i,{children:[a.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:.5},children:[a.jsxs(n,{variant:"subtitle2",sx:{fontWeight:600,color:"primary.main",flex:1},children:["Surah ",t.surahNumber,": ",t.surahName," (",t.surahArabicName,") - Ayah"," ",t.ayahNumber]}),a.jsx(d,{size:"small",onClick:e=>((e,a)=>{a.stopPropagation();const t=`ayah-${e.surahNumber}-${e.ayahNumber}`;if(z(e.surahNumber,e.ayahNumber))S(_e(t));else{const a={id:t,type:"ayah",surahNumber:e.surahNumber,ayahNumber:e.ayahNumber,text:e.translation,audio:"",note:"",surahName:e.surahName,surahArabicName:e.surahArabicName};S(Oe(a))}})(t,e),sx:{ml:1,color:z(t.surahNumber,t.ayahNumber)?"red":"text.secondary","&:hover":{color:"red"}},children:z(t.surahNumber,t.ayahNumber)?a.jsx(M,{fontSize:"small"}):a.jsx(W,{fontSize:"small"})})]}),a.jsx(n,{variant:"body2",sx:{lineHeight:1.4,"& mark":{backgroundColor:"#ffeb3b",padding:"1px 2px",borderRadius:"2px"}},dangerouslySetInnerHTML:{__html:t.highlighted}})]})})},t.verseKey))})]}):null,!x&&s&&0===c.length&&!g&&w&&a.jsx(i,{sx:{p:3,textAlign:"center"},children:a.jsxs(n,{variant:"body2",color:"text.secondary",children:['No results found for "',s,'"']})}),!s&&a.jsx(i,{sx:{p:3,textAlign:"center"},children:a.jsx(n,{variant:"body2",color:"text.secondary",children:"Enter keywords to search through the Quran"})})]})]})})};function st(e=1920,a=1){let t=e*a;return t=Math.max(t,1920),t=Math.min(t,3840),t=240*Math.ceil(t/240),t}function ot(e,a={}){if(!e)return null;const{quality:t=85,width:r=null,height:n=null,fit:i="crop",format:s="auto"}=a;try{const a=new URL(e);a.searchParams.set("q",String(t));const o=r||st(window.innerWidth,window.devicePixelRatio||1);return a.searchParams.set("w",String(o)),n&&a.searchParams.set("h",String(n)),a.searchParams.set("fit",i),a.searchParams.set("fm",s),a.searchParams.set("auto","enhance"),a.toString()}catch(o){return e}}const lt=new class{constructor(e=50){this.cache=new Map,this.maxSize=e}set(e,a){if(this.cache.size>=this.maxSize){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,{...a,timestamp:Date.now()})}get(e){const a=this.cache.get(e);if(!a)return null;return Date.now()-a.timestamp>864e5?(this.cache.delete(e),null):a}clear(){this.cache.clear()}};const dt="CmH0hk3YgDGkNbMvPBhbNL8n23lQwrNnrneWYr-lVlc";function ht(){const[e,t]=b.useState(null),[r,n]=b.useState(null),[s,o]=b.useState(!0),[l,h]=b.useState(!1),[c,u]=b.useState(null),[x,m]=b.useState(null),[g,p]=b.useState(""),[f,y]=b.useState(""),[j,v]=b.useState(null),[w,S]=b.useState(null),[C,A]=b.useState(!1),[I,N]=b.useState(!1),[T,z]=b.useState(null),[R,W]=b.useState(null),[$,E]=b.useState("ayah"),[F,U]=b.useState(!1),[L,P]=b.useState(!1),[B,H]=b.useState(!1),[D,O]=b.useState(!1),[_,K]=b.useState(!1),[Q,q]=b.useState(null),Y=Ee(),J=$e(e=>e.favorites.items),G=$e(e=>e.settings.ayah.textEdition.identifier),Z=$e(e=>e.settings.ayah.audioEdition.identifier),V=$e(e=>e.settings.hadith.book),X=$e(e=>e.settings.weather.enabled),ee=$e(e=>e.settings.greetings.enabled),ae=$e(e=>e.settings.greetings.name),te=$e(e=>e.settings.tasks.enabled),re=$e(e=>e.settings.background),ne=(null==re?void 0:re.refreshInterval)||"newtab";null==re||re.lastRefreshTime,null==re||re.currentImageUrl,null==re||re.fallbackImageUrl;const ie=(null==re?void 0:re.imageSource)||"category",se=(null==re?void 0:re.islamicCategory)||"nature",oe=(null==re?void 0:re.uploadedImages)||[],le=(null==re?void 0:re.currentUploadedImageIndex)||0,de=async()=>{try{if("upload"===ie&&oe.length>0){const e=le%oe.length,a=oe[e],t=(le+1)%oe.length;Y(Sa(t));const r=a.url.includes("unsplash.com")?ot(a.url):a.url;return m(r),p("Your Upload"),y("#"),Y(pa(r)),void Y(ga(Date.now()))}if("category"===ie){const e=`${se}-${function(){const e=window.innerWidth,a=window.devicePixelRatio||1,t=st(e,a);return{screenWidth:e,pixelRatio:a,trueResolution:e*a,optimalWidth:t,estimatedSize:`${Math.round(.4*t/1024)}KB`,deviceType:e<768?"mobile":e<1200?"tablet":"desktop"}}().optimalWidth}`,a=lt.get(e);if(a&&Math.random()>.3)return m(a.optimizedUrl),p(a.authorName),y(a.authorLink),Y(pa(a.optimizedUrl)),void Y(ga(Date.now()));0;const r={nature:"nature,landscape,mountains,sky,peaceful",architecture:"mosque,islamic architecture,minaret,dome",calligraphy:"arabic calligraphy,islamic art",geometric:"islamic pattern,islamic geometric,mandala,islamic symmetry"},n=r[se]||r.nature,i=await Ue.get("https://api.unsplash.com/photos/random",{params:{query:n,orientation:"landscape"},headers:{Authorization:`Client-ID ${dt}`}});if(i.data&&i.data.urls&&i.data.urls.raw){const a=i.data,r=ot(a.urls.raw),n=function(e){if(!e)return null;try{const a=new URL(e);return a.searchParams.set("w","40"),a.searchParams.set("h","30"),a.searchParams.set("q","20"),a.searchParams.set("blur","200"),a.searchParams.set("fm","jpg"),a.toString()}catch(c){return null}}(a.urls.raw);if(m(r),p(a.user.name),y(`${a.user.links.html}?utm_source=ilmtab&utm_medium=referral`),Y(pa(r)),Y(ga(Date.now())),lt.set(e,{optimizedUrl:r,placeholderUrl:n,authorName:a.user.name,authorLink:`${a.user.links.html}?utm_source=ilmtab&utm_medium=referral`,rawUrl:a.urls.raw}),a.links&&a.links.download_location)try{await Ue.get(a.links.download_location,{headers:{Authorization:`Client-ID ${dt}`},timeout:5e3})}catch(t){}return}throw new Error("Invalid API response")}}catch(t){}const e="https://images.unsplash.com/photo-1506744038136-46273834b3fb",a=ot(e)||`${e}?auto=format&fit=crop&w=1920&q=80`;m(a),p("Fallback Image"),y("#"),Y(pa(a)),Y(ga(Date.now()))};b.useEffect(()=>{de()},[ie,se,oe.length]),b.useEffect(()=>{if("newtab"===ne)return;const e=(()=>{switch(ne){case"5min":return 3e5;case"15min":return 9e5;case"30min":return 18e5;case"1hour":return 36e5;case"1day":return 864e5;case"1week":return 6048e5;default:return null}})();if(!e)return;const a=setInterval(()=>{de()},e);return()=>clearInterval(a)},[ne]);const he=async(e=null,a=null)=>{try{o(!0);const r=new URLSearchParams;e&&a&&(r.append("surah",e),r.append("ayah",a)),r.append("text_edition",G),r.append("audio_edition",Z);const n=(await Ue.get(`http://localhost:4000/api/ayat?${r.toString()}`,{timeout:1e4})).data;t(n),v(n.surah.number),S(n.surah.ayahNumberInSurah),u(null)}catch(r){u("Failed to fetch ayah")}finally{o(!1)}},ce=async(e=null,a=null)=>{try{h(!0);const t=new URLSearchParams;e?t.append("book",e):t.append("book",V),a&&t.append("hadithNumber",a);const r=(await Ue.get(`http://localhost:4000/api/hadith?${t}`,{timeout:12e3})).data;n(r),z(Number(r.number)),u(null)}catch(t){u("Failed to fetch hadith")}finally{h(!1)}};b.useEffect(()=>{he()},[]),b.useEffect(()=>{const e=setTimeout(()=>{O(!0)},2e3);return()=>clearTimeout(e)},[]),b.useEffect(()=>{null!=j&&null!=w&&he(j,w)},[G,Z]),b.useEffect(()=>{if(V){const e=Za.find(e=>e.slug===V);if(e){W(e.hadithsCount);const a=Math.floor(Math.random()*e.hadithsCount)+1;z(a),ce(V,a)}}},[V]);const ue=["ayah","hadith"],xe=e=>{var a;if(!e)return;let t="",r=null;if(e.surah)t=`ayah-${e.surah.number}-${e.surah.ayahNumberInSurah}`,r={id:t,type:"ayah",surahNumber:e.surah.number,ayahNumber:e.surah.ayahNumberInSurah,text:e.text,audio:(null==(a=e.audio)?void 0:a.main)||"",note:""};else{if(!e.bookSlug)return;t=`hadith-${e.bookSlug}-${e.number}`,r={id:t,type:"hadith",book:e.bookSlug,bookDisplayName:e.book,hadithNumber:e.number,englishText:e.text.english||"",note:""}}const n=J.some(e=>e.id===t);Y(n?_e(t):Oe(r))},me={backgroundImage:x?`url(${x})`:"none",backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",paddingTop:"2rem",transition:"background-image 0.5s ease-in-out",position:"relative"},ge=e=>D?"page-load-complete":`page-load-stagger-${e}`,pe=()=>_?"next"===Q?"view-slide-in-right":"prev"===Q?"view-slide-in-left":"view-cross-fade":"view-cross-fade";return a.jsxs(a.Fragment,{children:[a.jsx(Ae,{}),a.jsxs("div",{style:me,className:"page-load-background",children:[a.jsxs(i,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",px:2,py:4},children:[c&&a.jsx(i,{sx:{position:"fixed",top:20,left:"50%",transform:"translateX(-50%)",zIndex:2e3,width:"90%",maxWidth:"500px"},children:a.jsx(Aa,{error:c,onDismiss:()=>u(null),showDetails:!1})}),a.jsxs(i,{sx:{backgroundColor:"rgba(255, 255, 255, 0.4)",backdropFilter:"blur(10px)",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.15)",borderRadius:"20px",px:2,py:.5,mb:2,display:"flex",alignItems:"center"},className:ge(1),children:[a.jsx(d,{onClick:()=>{if(_)return;K(!0),q("prev");const e=(ue.indexOf($)-1+ue.length)%ue.length;setTimeout(()=>{E(ue[e]),setTimeout(()=>{K(!1),q(null)},400)},150)},size:"small",sx:{color:"#374151"},children:a.jsx(Ie,{fontSize:"small"})}),a.jsx("span",{style:{color:"#374151",fontSize:"0.9rem",fontWeight:500,letterSpacing:"0.5px",fontFamily:"Inter, Roboto, sans-serif",margin:"0 8px",userSelect:"none"},children:"ayah"===$?"Ayah Mode":"Hadith Mode"}),a.jsx(d,{onClick:()=>{if(_)return;K(!0),q("next");const e=(ue.indexOf($)+1)%ue.length;setTimeout(()=>{E(ue[e]),setTimeout(()=>{K(!1),q(null)},400)},150)},size:"small",sx:{color:"#374151"},children:a.jsx(Ne,{fontSize:"small"})})]}),a.jsxs(i,{sx:{width:"100%",maxWidth:"900px",mx:"auto"},className:"view-transition-container",children:["ayah"===$&&a.jsx("div",{className:`${ge(2)} ${pe()}`,children:s?a.jsx(Ka,{}):e?a.jsx("div",{className:"animate-fade-in",children:a.jsx($a,{ayah:e,onNext:()=>{C&&j&&w?he(j,w+1):he()},onPrev:()=>{C&&j&&w>1&&he(j,w-1)},onToggleContinuous:()=>A(e=>!e),isContinuous:C,onFavorite:xe})}):null}),"hadith"===$&&a.jsx("div",{className:`${ge(2)} ${pe()}`,children:l?a.jsx(Qa,{}):r?a.jsx("div",{className:"animate-fade-in",children:a.jsx(Fa,{hadith:r,onNext:()=>{if(I&&T&&R&&T<R){const e=T+1;z(e),ce(V,e)}else ce()},onPrev:()=>{if(I&&T>1){const e=T-1;z(e),ce(V,e)}},onToggleContinuous:()=>N(e=>!e),isContinuous:I,onFavorite:xe})}):null}),X&&a.jsx("div",{className:ge(3),children:a.jsx(_a,{})}),ee&&a.jsx("div",{className:ge(4),children:a.jsx(La,{name:ae})}),te&&a.jsx("div",{className:ge(5),children:a.jsx(Ba,{})})]})]}),a.jsxs(i,{sx:{position:"fixed",bottom:10,left:10,display:"flex",gap:1,zIndex:1500},className:ge(6),children:[a.jsx(k,{title:"Favorites",children:a.jsx(d,{size:"large",className:"btn-smooth",sx:{backgroundColor:"#fff",boxShadow:2,"&:hover":{backgroundColor:"#eee"}},onClick:()=>U(!0),children:a.jsx(M,{color:"error",className:"icon-smooth"})})}),a.jsx(k,{title:"Settings",children:a.jsx(d,{size:"large",className:"btn-smooth",sx:{backgroundColor:"#fff",boxShadow:2,"&:hover":{backgroundColor:"#eee"}},onClick:()=>P(!0),children:a.jsx(Te,{className:"icon-smooth"})})}),a.jsx(k,{title:"Search Quran",children:a.jsx(d,{size:"large",className:"btn-smooth",sx:{backgroundColor:"#fff",boxShadow:2,"&:hover":{backgroundColor:"#eee"}},onClick:()=>H(!0),children:a.jsx(Ce,{color:"primary",className:"icon-smooth"})})}),a.jsx(Ya,{open:F,onClose:()=>U(!1),favorites:J,onUpdateNote:(e,a)=>{Y(Ke({id:e,note:a}))},onDeleteFavorite:e=>{Y(_e(e))},onNavigateToFavorite:e=>{"ayah"===e.type?(E("ayah"),he(e.surahNumber,e.ayahNumber)):"hadith"===e.type&&(E("hadith"),ce(e.book,e.hadithNumber))}}),a.jsx(rt,{open:L,onClose:()=>P(!1)})]}),B&&a.jsx(it,{onSelectAyah:(e,a)=>{E("ayah"),he(e,a)},onClose:()=>H(!1)}),x&&a.jsxs("div",{style:{position:"fixed",bottom:10,right:10,color:"white",backgroundColor:"rgba(0, 0, 0, 0.4)",padding:"4px 8px",borderRadius:"4px",fontSize:"0.8rem",fontFamily:"Arial, sans-serif",zIndex:1e3,userSelect:"none"},children:["Photo by"," ",a.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",style:{color:"#ddd",textDecoration:"underline"},children:g})," ","on"," ",a.jsx("a",{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",style:{color:"#ddd",textDecoration:"underline"},children:"Unsplash"})]})]})]})}const ct=()=>a.jsx(Fe,{store:Ca,children:a.jsx(ht,{})});Be.createRoot(document.getElementById("root")).render(a.jsx(ct,{}));
