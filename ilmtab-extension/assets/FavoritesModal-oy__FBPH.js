import{r as e,j as s,a8 as t,a9 as a,B as o,T as r,I as i,d as n,aa as l,ab as x,P as d,Y as c,c as h,G as p,H as m,J as b,V as j,X as u}from"./mui-BS7ftOUA.js";import{t as g}from"./index-Cd5iI2-M.js";import"./vendor-eVk5PToZ.js";import"./utils-DVma4InU.js";function y({children:e,value:t,index:a}){return t===a?s.jsx(o,{sx:{pt:3},children:e}):null}function f({open:f,onClose:v,favorites:S,onUpdateNote:C,onDeleteFavorite:k,onNavigateToFavorite:w}){const[N,z]=e.useState(0),[$,R]=e.useState({}),[T,A]=e.useState({}),[P,W]=e.useState({}),F=S.filter(e=>"ayah"===e.type),H=S.filter(e=>"hadith"===e.type),I=(e,s)=>{A(s=>({...s,[e]:!s[e]})),W(t=>({...t,[e]:s}))},D=e=>{const s=P[e];C&&void 0!==s&&(C(e,s),A(s=>({...s,[e]:!1})))},M=e=>{const{id:t,text:a,note:l,type:x,englishText:y}=e,f=$[t],S=T[t],C="hadith"===x?y:a,N=C&&C.length>200;let z="";if("ayah"===x){const s=e.surahName||g[e.surahNumber]||"Unknown",t=e.surahArabicName||"";z=`Surah ${e.surahNumber}: ${s} (${t}) - Ayah ${e.ayahNumber}`}else{z=`${e.bookDisplayName||e.book}, Hadith ${e.hadithNumber}`}return s.jsxs(d,{elevation:1,sx:{p:2,mb:2,borderRadius:2,cursor:"pointer",transition:"all 0.3s ease",border:"1px solid transparent","&:hover":{elevation:4,transform:"translateY(-3px)",backgroundColor:"rgba(25, 118, 210, 0.04)",borderColor:"rgba(25, 118, 210, 0.2)",boxShadow:"0 8px 25px rgba(25, 118, 210, 0.15)"}},onClick:()=>(e=>{w&&(w(e),v())})(e),children:[s.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[s.jsx(r,{variant:"subtitle2",fontWeight:"600",children:z}),s.jsx(o,{onClick:e=>e.stopPropagation(),children:s.jsx(i,{onClick:()=>(e=>{k&&k(e)})(t),size:"small",children:s.jsx(c,{fontSize:"small"})})})]}),s.jsxs(o,{children:[s.jsx(r,{sx:{fontStyle:"italic",mt:1,fontSize:"0.9rem",color:"text.secondary"},children:N?(null==C?void 0:C.slice(0,200))+"…":C}),N&&s.jsx(h,{in:f,timeout:300,children:s.jsx(o,{className:"expand-enter",children:s.jsx(r,{sx:{fontStyle:"italic",fontSize:"0.9rem",color:"text.secondary",mt:1},className:"list-item-enter",children:null==C?void 0:C.slice(200)})})}),N&&s.jsx(o,{onClick:e=>e.stopPropagation(),children:s.jsxs(i,{onClick:()=>(e=>R(s=>({...s,[e]:!s[e]})))(t),size:"small",className:"btn-smooth",children:[s.jsx(o,{className:"icon-smooth",children:f?s.jsx(p,{}):s.jsx(m,{})}),s.jsx(r,{variant:"caption",sx:{ml:.5},children:f?"Show Less":"Show More"})]})})]}),s.jsx(o,{sx:{mt:1},children:S?s.jsxs(o,{onClick:e=>e.stopPropagation(),children:[s.jsx(b,{label:"Personal Notes",variant:"outlined",fullWidth:!0,multiline:!0,minRows:2,maxRows:4,value:P[t]||"",onChange:e=>((e,s)=>{W(t=>({...t,[e]:s}))})(t,e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D(t))},sx:{fontSize:"0.8rem"}}),s.jsxs(o,{display:"flex",justifyContent:"flex-end",gap:1,mt:1,children:[s.jsx(i,{onClick:()=>I(t,l),size:"small",sx:{color:"text.secondary"},children:s.jsx(n,{fontSize:"small"})}),s.jsx(i,{onClick:()=>D(t),size:"small",sx:{color:"text.secondary"},children:s.jsx(j,{fontSize:"small"})})]})]}):s.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",sx:{bgcolor:l?"rgba(76, 175, 80, 0.04)":"rgba(0,0,0,0.02)",borderRadius:1,p:1,border:l?"1px solid rgba(76, 175, 80, 0.2)":"1px solid rgba(0,0,0,0.04)"},children:[s.jsx(r,{sx:{fontSize:"0.8rem",color:l?"text.primary":"text.secondary",fontStyle:l?"normal":"italic",whiteSpace:"pre-line",flex:1},children:l||"No personal notes added yet."}),s.jsx(i,{onClick:e=>{e.stopPropagation(),I(t,l)},size:"small",children:s.jsx(u,{fontSize:"small"})})]})})]},t)},Y=({type:e})=>s.jsxs(o,{textAlign:"center",py:4,sx:{bgcolor:"rgba(0,0,0,0.02)",borderRadius:2,border:"2px dashed rgba(0,0,0,0.1)"},children:[s.jsxs(r,{variant:"h6",sx:{mb:1,color:"text.secondary"},children:["No ","ayah"===e?"Ayahs":"Hadiths"," Saved"]}),s.jsxs(r,{variant:"body2",color:"text.secondary",children:["Start adding ","ayah"===e?"verses":"hadiths"," to your favorites by clicking the heart icon"]})]});return s.jsx(t,{open:f,onClose:v,closeAfterTransition:!0,children:s.jsx(a,{direction:"right",in:f,mountOnEnter:!0,unmountOnExit:!0,children:s.jsxs(o,{sx:{width:{xs:"100vw",sm:"70vw",md:"50vw",lg:"35vw",xl:"25vw"},maxWidth:"480px",minWidth:"320px",height:"100vh",overflowY:"auto",bgcolor:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",borderRadius:{xs:0,sm:"0 20px 20px 0"},boxShadow:"0 25px 50px rgba(0, 0, 0, 0.15)",position:"fixed",top:0,left:0,border:"1px solid rgba(255, 255, 255, 0.2)"},children:[s.jsxs(o,{sx:{position:"sticky",top:0,zIndex:10,bgcolor:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(0, 0, 0, 0.06)",p:3},children:[s.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[s.jsxs(o,{children:[s.jsx(r,{variant:"h5",sx:{fontWeight:700,color:"text.primary"},children:"❤️ Favorites"}),s.jsx(r,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:"Your saved verses and hadiths"})]}),s.jsx(i,{onClick:v,sx:{bgcolor:"rgba(0, 0, 0, 0.04)","&:hover":{bgcolor:"rgba(0, 0, 0, 0.08)"}},children:s.jsx(n,{})})]}),s.jsxs(l,{value:N,onChange:(e,s)=>z(s),sx:{mt:3,"& .MuiTab-root":{minHeight:48,textTransform:"none",fontWeight:600,fontSize:"0.875rem","&.Mui-selected":{color:"primary.main"}},"& .MuiTabs-indicator":{height:3,borderRadius:"3px 3px 0 0"}},children:[s.jsx(x,{label:`Ayahs (${F.length})`}),s.jsx(x,{label:`Hadiths (${H.length})`})]})]}),s.jsxs(o,{sx:{p:3},children:[s.jsx(y,{value:N,index:0,children:0===F.length?s.jsx(Y,{type:"ayah"}):F.map(e=>M(e))}),s.jsx(y,{value:N,index:1,children:0===H.length?s.jsx(Y,{type:"hadith"}):H.map(e=>M(e))})]})]})})})}export{f as default};
